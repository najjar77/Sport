import{ae as zl,af as Kl,L as ke,v as m,ag as ue,ah as bi,I as ae,ai as Un,aj as ud,ak as Vi,al as cd,am as Hl,an as Qt,ao as Gl,J as dt,ap as oo,Q as mr,aq as Ye,ar as As,c as S,as as Ss,at as it,Z as Wl,S as le,M as He,au as ao,Y as Se,r as j,av as Ql,aw as vn,ax as bs,ay as je,az as st,aA as Xl,aB as Cn,aC as lo,aD as yn,aE as uo,R as Yr,aF as Jr,aG as Dt,aH as gr,aI as Yl,aJ as Jl,aK as Zr,aL as hd,K as co,aM as Zl,W as Vs,aN as dd,aO as Ea,N as fd,O as eu,aP as md,P as tu,aQ as gd,aR as pd,aS as ho,T as vd,aT as yd,U as nu,V as ru,aU as _d,aV as Ed,aW as Td,aX as wd,aY as Id,a0 as jt,aZ as fo,a_ as Ta,a$ as Vt,b0 as Cs,E as Ee,b1 as Ad,b2 as wa,b3 as ii,b4 as oi,b5 as Ia,b6 as ai,b7 as Aa,b8 as Sa,a1 as ye,b9 as _n,C as pr,ba as su,bb as Sd,bc as mo,bd as iu,o as go,be as ou,bf as bd,bg as Vd,bh as au,bi as po,X as Rs,bj as lu,bk as uu,bl as Cd,bm as Rd,bn as Pd,bo as kd,bp as Ps,bq as ba,br as Dd,bs as Va,bt as cu,bu as hu,bv as xd,bw as du,bx as fu,by as mu,a8 as at,bz as gu,bA as es,y as Xe,bB as qt,bC as Nd,bD as xr,bE as Od,bF as Md,bG as Fd,bH as Ca,bI as Ld,bJ as Bd,bK as Ud,d as vo,i as Ra,m as lt,q as ts,x as W,bL as $d,ac as zr,s as Ie,a6 as sn,a7 as on,ad as Nr,a5 as We,bM as jd,bN as qd,bO as zd,_ as Kd,a3 as zt,t as ot,a9 as dn,bP as Hd,bQ as Gd}from"./entry.99cfa736.js";const Kr=new WeakMap;function Wd(t,e){Object.keys(e).forEach(n=>{if(zl(n)){const r=Kl(n),s=Kr.get(t);if(e[n]==null)s==null||s.forEach(i=>{const[o,a]=i;o===r&&(t.removeEventListener(r,a),s.delete(i))});else if(!s||![...s].some(i=>i[0]===r&&i[1]===e[n])){t.addEventListener(r,e[n]);const i=s||new Set;i.add([r,e[n]]),Kr.has(t)||Kr.set(t,i)}}else e[n]==null?t.removeAttribute(n):t.setAttribute(n,e[n])})}function Qd(t,e){Object.keys(e).forEach(n=>{if(zl(n)){const r=Kl(n),s=Kr.get(t);s==null||s.forEach(i=>{const[o,a]=i;o===r&&(t.removeEventListener(r,a),s.delete(i))})}else t.removeAttribute(n)})}function pu(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}function vu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;t;){if(e?Xd(t):yo(t))return t;t=t.parentElement}return document.scrollingElement}function ns(t,e){const n=[];if(e&&t&&!e.contains(t))return n;for(;t&&(yo(t)&&n.push(t),t!==e);)t=t.parentElement;return n}function yo(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight}function Xd(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return["scroll","auto"].includes(e.overflowY)}function Yd(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}const Jd=ae({target:Object},"v-dialog-transition"),yu=ke()({name:"VDialogTransition",props:Jd(),setup(t,e){let{slots:n}=e;const r={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,i){var d;await new Promise(f=>requestAnimationFrame(f)),await new Promise(f=>requestAnimationFrame(f)),s.style.visibility="";const{x:o,y:a,sx:l,sy:u,speed:c}=ka(t.target,s),h=Un(s,[{transform:`translate(${o}px, ${a}px) scale(${l}, ${u})`,opacity:0},{}],{duration:225*c,easing:ud});(d=Pa(s))==null||d.forEach(f=>{Un(f,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*c,easing:Vi})}),h.finished.then(()=>i())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,i){var d;await new Promise(f=>requestAnimationFrame(f));const{x:o,y:a,sx:l,sy:u,speed:c}=ka(t.target,s);Un(s,[{},{transform:`translate(${o}px, ${a}px) scale(${l}, ${u})`,opacity:0}],{duration:125*c,easing:cd}).finished.then(()=>i()),(d=Pa(s))==null||d.forEach(f=>{Un(f,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*c,easing:Vi})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>t.target?m(bi,ue({name:"dialog-transition"},r,{css:!1}),n):m(bi,{name:"dialog-transition"},n)}});function Pa(t){var n;const e=(n=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return e&&[...e]}function ka(t,e){const n=t.getBoundingClientRect(),r=Hl(e),[s,i]=getComputedStyle(e).transformOrigin.split(" ").map(T=>parseFloat(T)),[o,a]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;o==="left"||a==="left"?l-=n.width/2:(o==="right"||a==="right")&&(l+=n.width/2);let u=n.top+n.height/2;o==="top"||a==="top"?u-=n.height/2:(o==="bottom"||a==="bottom")&&(u+=n.height/2);const c=n.width/r.width,h=n.height/r.height,d=Math.max(1,c,h),f=c/d||0,y=h/d||0,p=r.width*r.height/(window.innerWidth*window.innerHeight),g=p>.12?Math.min(1.5,(p-.12)*10+1):1;return{x:l-(s+r.left),y:u-(i+r.top),sx:f,sy:y,speed:g}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Zd=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Eu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_u(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Zd(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new ef;const d=i<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ef extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tf=function(t){const e=_u(t);return Eu.encodeByteArray(e,!0)},rs=function(t){return tf(t).replace(/\./g,"")},nf=function(t){try{return Eu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=()=>rf().__FIREBASE_DEFAULTS__,of=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},af=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nf(t[1]);return e&&JSON.parse(e)},_o=()=>{try{return sf()||of()||af()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lf=t=>{var e,n;return(n=(e=_o())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uf=t=>{const e=lf(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Tu=()=>{var t;return(t=_o())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[rs(JSON.stringify(n)),rs(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function df(){var t;const e=(t=_o())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function ff(){return!df()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wu(){try{return typeof indexedDB=="object"}catch{return!1}}function mf(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="FirebaseError";class Rn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gf,Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iu.prototype.create)}}class Iu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?pf(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Rn(s,a,r)}}function pf(t,e){return t.replace(vf,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vf=/\{\$([^}]+)}/g;function Ci(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Da(i)&&Da(o)){if(!Ci(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Da(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t){return t&&t._delegate?t._delegate:t}class Jn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cf;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ef(e))try{this.getOrInitializeService({instanceIdentifier:Ut})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ut){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ut){return this.instances.has(e)}getOptions(e=Ut){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_f(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ut){return this.component?this.component.multipleInstances?e:Ut:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _f(t){return t===Ut?void 0:t}function Ef(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const wf={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},If=ne.INFO,Af={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},Sf=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Af[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Au{constructor(e){this.name=e,this._logLevel=If,this._logHandler=Sf,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wf[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const bf=(t,e)=>e.some(n=>t instanceof n);let xa,Na;function Vf(){return xa||(xa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cf(){return Na||(Na=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Su=new WeakMap,Ri=new WeakMap,bu=new WeakMap,li=new WeakMap,Eo=new WeakMap;function Rf(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Rt(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Su.set(n,t)}).catch(()=>{}),Eo.set(e,t),e}function Pf(t){if(Ri.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ri.set(t,e)}let Pi={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ri.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bu.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kf(t){Pi=t(Pi)}function Df(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ui(this),e,...n);return bu.set(r,e.sort?e.sort():[e]),Rt(r)}:Cf().includes(t)?function(...e){return t.apply(ui(this),e),Rt(Su.get(this))}:function(...e){return Rt(t.apply(ui(this),e))}}function xf(t){return typeof t=="function"?Df(t):(t instanceof IDBTransaction&&Pf(t),bf(t,Vf())?new Proxy(t,Pi):t)}function Rt(t){if(t instanceof IDBRequest)return Rf(t);if(li.has(t))return li.get(t);const e=xf(t);return e!==t&&(li.set(t,e),Eo.set(e,t)),e}const ui=t=>Eo.get(t);function Nf(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Rt(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Rt(o.result),l.oldVersion,l.newVersion,Rt(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Of=["get","getKey","getAll","getAllKeys","count"],Mf=["put","add","delete","clear"],ci=new Map;function Oa(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ci.get(e))return ci.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Mf.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Of.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return ci.set(e,i),i}kf(t=>({...t,get:(e,n,r)=>Oa(e,n)||t.get(e,n,r),has:(e,n)=>!!Oa(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lf(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Lf(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ki="@firebase/app",Ma="0.9.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=new Au("@firebase/app"),Bf="@firebase/app-compat",Uf="@firebase/analytics-compat",$f="@firebase/analytics",jf="@firebase/app-check-compat",qf="@firebase/app-check",zf="@firebase/auth",Kf="@firebase/auth-compat",Hf="@firebase/database",Gf="@firebase/database-compat",Wf="@firebase/functions",Qf="@firebase/functions-compat",Xf="@firebase/installations",Yf="@firebase/installations-compat",Jf="@firebase/messaging",Zf="@firebase/messaging-compat",em="@firebase/performance",tm="@firebase/performance-compat",nm="@firebase/remote-config",rm="@firebase/remote-config-compat",sm="@firebase/storage",im="@firebase/storage-compat",om="@firebase/firestore",am="@firebase/firestore-compat",lm="firebase",um="10.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]",cm={[ki]:"fire-core",[Bf]:"fire-core-compat",[$f]:"fire-analytics",[Uf]:"fire-analytics-compat",[qf]:"fire-app-check",[jf]:"fire-app-check-compat",[zf]:"fire-auth",[Kf]:"fire-auth-compat",[Hf]:"fire-rtdb",[Gf]:"fire-rtdb-compat",[Wf]:"fire-fn",[Qf]:"fire-fn-compat",[Xf]:"fire-iid",[Yf]:"fire-iid-compat",[Jf]:"fire-fcm",[Zf]:"fire-fcm-compat",[em]:"fire-perf",[tm]:"fire-perf-compat",[nm]:"fire-rc",[rm]:"fire-rc-compat",[sm]:"fire-gcs",[im]:"fire-gcs-compat",[om]:"fire-fst",[am]:"fire-fst-compat","fire-js":"fire-js",[lm]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Map,xi=new Map;function hm(t,e){try{t.container.addComponent(e)}catch(n){Yt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function os(t){const e=t.name;if(xi.has(e))return Yt.debug(`There were multiple attempts to register component ${e}.`),!1;xi.set(e,t);for(const n of is.values())hm(n,t);return!0}function dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Pt=new Iu("app","Firebase",fm);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=um;function Vu(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Di,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Pt.create("bad-app-name",{appName:String(s)});if(n||(n=Tu()),!n)throw Pt.create("no-options");const i=is.get(s);if(i){if(Ci(n,i.options)&&Ci(r,i.config))return i;throw Pt.create("duplicate-app",{appName:s})}const o=new Tf(s);for(const l of xi.values())o.addComponent(l);const a=new mm(n,r,o);return is.set(s,a),a}function pm(t=Di){const e=is.get(t);if(!e&&t===Di&&Tu())return Vu();if(!e)throw Pt.create("no-app",{appName:t});return e}function fn(t,e,n){var r;let s=(r=cm[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yt.warn(a.join(" "));return}os(new Jn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="firebase-heartbeat-database",ym=1,Zn="firebase-heartbeat-store";let hi=null;function Cu(){return hi||(hi=Nf(vm,ym,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zn)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pt.create("idb-open",{originalErrorMessage:t.message})})),hi}async function _m(t){try{const n=(await Cu()).transaction(Zn),r=await n.objectStore(Zn).get(Ru(t));return await n.done,r}catch(e){if(e instanceof Rn)Yt.warn(e.message);else{const n=Pt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yt.warn(n.message)}}}async function Fa(t,e){try{const r=(await Cu()).transaction(Zn,"readwrite");await r.objectStore(Zn).put(e,Ru(t)),await r.done}catch(n){if(n instanceof Rn)Yt.warn(n.message);else{const r=Pt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yt.warn(r.message)}}}function Ru(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=1024,Tm=30*24*60*60*1e3;class wm{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Am(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=La();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Tm}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=La(),{heartbeatsToSend:r,unsentEntries:s}=Im(this._heartbeatsCache.heartbeats),i=rs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function La(){return new Date().toISOString().substring(0,10)}function Im(t,e=Em){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ba(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ba(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Am{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wu()?mf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _m(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fa(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fa(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ba(t){return rs(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t){os(new Jn("platform-logger",e=>new Ff(e),"PRIVATE")),os(new Jn("heartbeat",e=>new wm(e),"PRIVATE")),fn(ki,Ma,t),fn(ki,Ma,"esm2017"),fn("fire-js","")}Sm("");var bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,To=To||{},K=bm||self;function ks(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function vr(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Vm(t){return Object.prototype.hasOwnProperty.call(t,di)&&t[di]||(t[di]=++Cm)}var di="closure_uid_"+(1e9*Math.random()>>>0),Cm=0;function Rm(t,e,n){return t.call.apply(t.bind,arguments)}function Pm(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function qe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?qe=Rm:qe=Pm,qe.apply(null,arguments)}function Or(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function De(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Mt(){this.s=this.s,this.o=this.o}var km=0;Mt.prototype.s=!1;Mt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),km!=0)&&Vm(this)};Mt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pu=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function wo(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ua(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ks(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function ze(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var Dm=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};K.addEventListener("test",n,e),K.removeEventListener("test",n,e)}catch{}return t}();function er(t){return/^[\s\xa0]*$/.test(t)}function Ds(){var t=K.navigator;return t&&(t=t.userAgent)?t:""}function ft(t){return Ds().indexOf(t)!=-1}function Io(t){return Io[" "](t),t}Io[" "]=function(){};function xm(t,e){var n=Sg;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Nm=ft("Opera"),En=ft("Trident")||ft("MSIE"),ku=ft("Edge"),Ni=ku||En,Du=ft("Gecko")&&!(Ds().toLowerCase().indexOf("webkit")!=-1&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Om=Ds().toLowerCase().indexOf("webkit")!=-1&&!ft("Edge");function xu(){var t=K.document;return t?t.documentMode:void 0}var Oi;e:{var fi="",mi=function(){var t=Ds();if(Du)return/rv:([^\);]+)(\)|;)/.exec(t);if(ku)return/Edge\/([\d\.]+)/.exec(t);if(En)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Om)return/WebKit\/(\S+)/.exec(t);if(Nm)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(mi&&(fi=mi?mi[1]:""),En){var gi=xu();if(gi!=null&&gi>parseFloat(fi)){Oi=String(gi);break e}}Oi=fi}var Mi;if(K.document&&En){var $a=xu();Mi=$a||parseInt(Oi,10)||void 0}else Mi=void 0;var Mm=Mi;function tr(t,e){if(ze.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Du){e:{try{Io(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Fm[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&tr.$.h.call(this)}}De(tr,ze);var Fm={2:"touch",3:"pen",4:"mouse"};tr.prototype.h=function(){tr.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var yr="closure_listenable_"+(1e6*Math.random()|0),Lm=0;function Bm(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++Lm,this.fa=this.ia=!1}function xs(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ao(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Um(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Nu(t){const e={};for(const n in t)e[n]=t[n];return e}const ja="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ou(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<ja.length;i++)n=ja[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ns(t){this.src=t,this.g={},this.h=0}Ns.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Li(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Bm(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Fi(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=Pu(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(xs(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Li(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var So="closure_lm_"+(1e6*Math.random()|0),pi={};function Mu(t,e,n,r,s){if(r&&r.once)return Lu(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Mu(t,e[i],n,r,s);return null}return n=Co(n),t&&t[yr]?t.O(e,n,vr(r)?!!r.capture:!!r,s):Fu(t,e,n,!1,r,s)}function Fu(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=vr(s)?!!s.capture:!!s,a=Vo(t);if(a||(t[So]=a=new Ns(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=$m(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Dm||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Uu(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function $m(){function t(n){return e.call(t.src,t.listener,n)}const e=jm;return t}function Lu(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Lu(t,e[i],n,r,s);return null}return n=Co(n),t&&t[yr]?t.P(e,n,vr(r)?!!r.capture:!!r,s):Fu(t,e,n,!0,r,s)}function Bu(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Bu(t,e[i],n,r,s);else r=vr(r)?!!r.capture:!!r,n=Co(n),t&&t[yr]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Li(i,n,r,s),-1<n&&(xs(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Vo(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Li(e,n,r,s)),(n=-1<t?e[t]:null)&&bo(n))}function bo(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[yr])Fi(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Uu(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Vo(e))?(Fi(n,t),n.h==0&&(n.src=null,e[So]=null)):xs(t)}}}function Uu(t){return t in pi?pi[t]:pi[t]="on"+t}function jm(t,e){if(t.fa)t=!0;else{e=new tr(e,this);var n=t.listener,r=t.la||t.src;t.ia&&bo(t),t=n.call(r,e)}return t}function Vo(t){return t=t[So],t instanceof Ns?t:null}var vi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Co(t){return typeof t=="function"?t:(t[vi]||(t[vi]=function(e){return t.handleEvent(e)}),t[vi])}function Pe(){Mt.call(this),this.i=new Ns(this),this.S=this,this.J=null}De(Pe,Mt);Pe.prototype[yr]=!0;Pe.prototype.removeEventListener=function(t,e,n,r){Bu(this,t,e,n,r)};function Me(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ze(e,t);else if(e instanceof ze)e.target=e.target||t;else{var s=e;e=new ze(r,t),Ou(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Mr(o,r,!0,e)&&s}if(o=e.g=t,s=Mr(o,r,!0,e)&&s,s=Mr(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Mr(o,r,!1,e)&&s}Pe.prototype.N=function(){if(Pe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)xs(n[r]);delete t.g[e],t.h--}}this.J=null};Pe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Pe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Mr(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Fi(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Ro=K.JSON.stringify;class qm{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function zm(){var t=Po;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Km{constructor(){this.h=this.g=null}add(e,n){const r=$u.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var $u=new qm(()=>new Hm,t=>t.reset());class Hm{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Gm(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Wm(t){K.setTimeout(()=>{throw t},0)}let nr,rr=!1,Po=new Km,ju=()=>{const t=K.Promise.resolve(void 0);nr=()=>{t.then(Qm)}};var Qm=()=>{for(var t;t=zm();){try{t.h.call(t.g)}catch(n){Wm(n)}var e=$u;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}rr=!1};function Os(t,e){Pe.call(this),this.h=t||1,this.g=e||K,this.j=qe(this.qb,this),this.l=Date.now()}De(Os,Pe);V=Os.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Me(this,"tick"),this.ga&&(ko(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ko(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}V.N=function(){Os.$.N.call(this),ko(this),delete this.g};function Do(t,e,n){if(typeof t=="function")n&&(t=qe(t,n));else if(t&&typeof t.handleEvent=="function")t=qe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:K.setTimeout(t,e||0)}function qu(t){t.g=Do(()=>{t.g=null,t.i&&(t.i=!1,qu(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Xm extends Mt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qu(this)}N(){super.N(),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(t){Mt.call(this),this.h=t,this.g={}}De(sr,Mt);var qa=[];function zu(t,e,n,r){Array.isArray(n)||(n&&(qa[0]=n.toString()),n=qa);for(var s=0;s<n.length;s++){var i=Mu(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Ku(t){Ao(t.g,function(e,n){this.g.hasOwnProperty(n)&&bo(e)},t),t.g={}}sr.prototype.N=function(){sr.$.N.call(this),Ku(this)};sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ms(){this.g=!0}Ms.prototype.Ea=function(){this.g=!1};function Ym(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function Jm(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function hn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+eg(t,n)+(r?" "+r:"")})}function Zm(t,e){t.info(function(){return"TIMEOUT: "+e})}Ms.prototype.info=function(){};function eg(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Ro(n)}catch{return e}}var tn={},za=null;function Fs(){return za=za||new Pe}tn.Ta="serverreachability";function Hu(t){ze.call(this,tn.Ta,t)}De(Hu,ze);function ir(t){const e=Fs();Me(e,new Hu(e))}tn.STAT_EVENT="statevent";function Gu(t,e){ze.call(this,tn.STAT_EVENT,t),this.stat=e}De(Gu,ze);function Ge(t){const e=Fs();Me(e,new Gu(e,t))}tn.Ua="timingevent";function Wu(t,e){ze.call(this,tn.Ua,t),this.size=e}De(Wu,ze);function _r(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){t()},e)}var Ls={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function xo(){}xo.prototype.h=null;function Ka(t){return t.h||(t.h=t.i())}function Xu(){}var Er={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function No(){ze.call(this,"d")}De(No,ze);function Oo(){ze.call(this,"c")}De(Oo,ze);var Bi;function Bs(){}De(Bs,xo);Bs.prototype.g=function(){return new XMLHttpRequest};Bs.prototype.i=function(){return{}};Bi=new Bs;function Tr(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new sr(this),this.P=tg,t=Ni?125:void 0,this.V=new Os(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Yu}function Yu(){this.i=null,this.g="",this.h=!1}var tg=45e3,Ju={},Ui={};V=Tr.prototype;V.setTimeout=function(t){this.P=t};function $i(t,e,n){t.L=1,t.A=$s(St(e)),t.u=n,t.S=!0,Zu(t,null)}function Zu(t,e){t.G=Date.now(),wr(t),t.B=St(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),ac(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Yu,t.g=Cc(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Xm(qe(t.Pa,t,t.g),t.O)),zu(t.U,t.g,"readystatechange",t.nb),e=t.I?Nu(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ir(),Ym(t.j,t.v,t.B,t.m,t.W,t.u)}V.nb=function(t){t=t.target;const e=this.M;e&&mt(t)==3?e.l():this.Pa(t)};V.Pa=function(t){try{if(t==this.g)e:{const c=mt(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||Ni||this.g&&(this.h.h||this.g.ja()||Qa(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?ir(3):ir(2)),Us(this);var n=this.g.da();this.ca=n;t:if(ec(this)){var r=Qa(this.g);t="";var s=r.length,i=mt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kt(this),Kn(this);var o="";break t}this.h.i=new K.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Jm(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!er(a)){var u=a;break t}}u=null}if(n=u)hn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ji(this,n);else{this.i=!1,this.s=3,Ge(12),Kt(this),Kn(this);break e}}this.S?(tc(this,c,o),Ni&&this.i&&c==3&&(zu(this.U,this.V,"tick",this.mb),this.V.start())):(hn(this.j,this.m,o,null),ji(this,o)),c==4&&Kt(this),this.i&&!this.J&&(c==4?Ac(this.l,this):(this.i=!1,wr(this)))}else wg(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Kt(this),Kn(this)}}}catch{}finally{}};function ec(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function tc(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=ng(t,n),s==Ui){e==4&&(t.s=4,Ge(14),r=!1),hn(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Ju){t.s=4,Ge(15),hn(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else hn(t.j,t.m,s,null),ji(t,s);ec(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Ge(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$o(e),e.M=!0,Ge(11))):(hn(t.j,t.m,n,"[Invalid Chunked Response]"),Kt(t),Kn(t))}V.mb=function(){if(this.g){var t=mt(this.g),e=this.g.ja();this.o<e.length&&(Us(this),tc(this,t,e),this.i&&t!=4&&wr(this))}};function ng(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Ui:(n=Number(e.substring(n,r)),isNaN(n)?Ju:(r+=1,r+n>e.length?Ui:(e=e.slice(r,r+n),t.o=r+n,e)))}V.cancel=function(){this.J=!0,Kt(this)};function wr(t){t.Y=Date.now()+t.P,nc(t,t.P)}function nc(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=_r(qe(t.lb,t),e)}function Us(t){t.C&&(K.clearTimeout(t.C),t.C=null)}V.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(Zm(this.j,this.B),this.L!=2&&(ir(),Ge(17)),Kt(this),this.s=2,Kn(this)):nc(this,this.Y-t)};function Kn(t){t.l.H==0||t.J||Ac(t.l,t)}function Kt(t){Us(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,ko(t.V),Ku(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ji(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||qi(n.i,t))){if(!t.K&&qi(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)us(n),Ks(n);else break e;Uo(n),Ge(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=_r(qe(n.ib,n),6e3));if(1>=cc(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ht(n,11)}else if((t.K||n.g==t)&&us(n),!er(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const y=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Mo(i,i.h),i.h=null))}if(r.F){const p=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(r.Da=p,he(r.I,r.F,p))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Vc(r,r.J?r.pa:null,r.Y),o.K){hc(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Us(a),wr(a)),r.g=o}else wc(r);0<n.j.length&&Hs(n)}else u[0]!="stop"&&u[0]!="close"||Ht(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Ht(n,7):Bo(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}ir(4)}catch{}}function rg(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ks(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function sg(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ks(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function rc(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ks(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=sg(t),r=rg(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var sc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ig(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Xt(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Xt){this.h=t.h,as(this,t.j),this.s=t.s,this.g=t.g,ls(this,t.m),this.l=t.l;var e=t.i,n=new or;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ha(this,n),this.o=t.o}else t&&(e=String(t).match(sc))?(this.h=!1,as(this,e[1]||"",!0),this.s=$n(e[2]||""),this.g=$n(e[3]||"",!0),ls(this,e[4]),this.l=$n(e[5]||"",!0),Ha(this,e[6]||"",!0),this.o=$n(e[7]||"")):(this.h=!1,this.i=new or(null,this.h))}Xt.prototype.toString=function(){var t=[],e=this.j;e&&t.push(jn(e,Ga,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(jn(e,Ga,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(jn(n,n.charAt(0)=="/"?lg:ag,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",jn(n,cg)),t.join("")};function St(t){return new Xt(t)}function as(t,e,n){t.j=n?$n(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ls(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ha(t,e,n){e instanceof or?(t.i=e,hg(t.i,t.h)):(n||(e=jn(e,ug)),t.i=new or(e,t.h))}function he(t,e,n){t.i.set(e,n)}function $s(t){return he(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $n(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function jn(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,og),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function og(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ga=/[#\/\?@]/g,ag=/[#\?:]/g,lg=/[#\?]/g,ug=/[#\?@]/g,cg=/#/g;function or(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ft(t){t.g||(t.g=new Map,t.h=0,t.i&&ig(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}V=or.prototype;V.add=function(t,e){Ft(this),this.i=null,t=Pn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function ic(t,e){Ft(t),e=Pn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function oc(t,e){return Ft(t),e=Pn(t,e),t.g.has(e)}V.forEach=function(t,e){Ft(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};V.ta=function(){Ft(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};V.Z=function(t){Ft(this);let e=[];if(typeof t=="string")oc(this,t)&&(e=e.concat(this.g.get(Pn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};V.set=function(t,e){return Ft(this),this.i=null,t=Pn(this,t),oc(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};V.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ac(t,e,n){ic(t,e),0<n.length&&(t.i=null,t.g.set(Pn(t,e),wo(n)),t.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Pn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function hg(t,e){e&&!t.j&&(Ft(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(ic(this,r),ac(this,s,n))},t)),t.j=e}var dg=class{constructor(t,e){this.g=t,this.map=e}};function lc(t){this.l=t||fg,K.PerformanceNavigationTiming?(t=K.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(K.g&&K.g.Ka&&K.g.Ka()&&K.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fg=10;function uc(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function cc(t){return t.h?1:t.g?t.g.size:0}function qi(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Mo(t,e){t.g?t.g.add(e):t.h=e}function hc(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}lc.prototype.cancel=function(){if(this.i=dc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function dc(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return wo(t.i)}var mg=class{stringify(t){return K.JSON.stringify(t,void 0)}parse(t){return K.JSON.parse(t,void 0)}};function gg(){this.g=new mg}function pg(t,e,n){const r=n||"";try{rc(t,function(s,i){let o=s;vr(s)&&(o=Ro(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function vg(t,e){const n=new Ms;if(K.Image){const r=new Image;r.onload=Or(Fr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Or(Fr,n,r,"TestLoadImage: error",!1,e),r.onabort=Or(Fr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Or(Fr,n,r,"TestLoadImage: timeout",!1,e),K.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Fr(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function js(t){this.l=t.ec||null,this.j=t.ob||!1}De(js,xo);js.prototype.g=function(){return new qs(this.l,this.j)};js.prototype.i=function(t){return function(){return t}}({});function qs(t,e){Pe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Fo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}De(qs,Pe);var Fo=0;V=qs.prototype;V.open=function(t,e){if(this.readyState!=Fo)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ar(this)};V.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||K).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=Fo};V.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ar(this)),this.g&&(this.readyState=3,ar(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof K.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fc(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function fc(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}V.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ir(this):ar(this),this.readyState==3&&fc(this)}};V.Za=function(t){this.g&&(this.response=this.responseText=t,Ir(this))};V.Ya=function(t){this.g&&(this.response=t,Ir(this))};V.ka=function(){this.g&&Ir(this)};function Ir(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ar(t)}V.setRequestHeader=function(t,e){this.v.append(t,e)};V.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ar(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var yg=K.JSON.parse;function _e(t){Pe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mc,this.L=this.M=!1}De(_e,Pe);var mc="",_g=/^https?$/i,Eg=["POST","PUT"];V=_e.prototype;V.Oa=function(t){this.M=t};V.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Bi.g(),this.C=this.u?Ka(this.u):Ka(Bi),this.g.onreadystatechange=qe(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){Wa(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=K.FormData&&t instanceof K.FormData,!(0<=Pu(Eg,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vc(this),0<this.B&&((this.L=Tg(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qe(this.ua,this)):this.A=Do(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Wa(this,i)}};function Tg(t){return En&&typeof t.timeout=="number"&&t.ontimeout!==void 0}V.ua=function(){typeof To<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Me(this,"timeout"),this.abort(8))};function Wa(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,gc(t),zs(t)}function gc(t){t.F||(t.F=!0,Me(t,"complete"),Me(t,"error"))}V.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Me(this,"complete"),Me(this,"abort"),zs(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zs(this,!0)),_e.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?pc(this):this.kb())};V.kb=function(){pc(this)};function pc(t){if(t.h&&typeof To<"u"&&(!t.C[1]||mt(t)!=4||t.da()!=2)){if(t.v&&mt(t)==4)Do(t.La,0,t);else if(Me(t,"readystatechange"),mt(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(sc)[1]||null;!s&&K.self&&K.self.location&&(s=K.self.location.protocol.slice(0,-1)),r=!_g.test(s?s.toLowerCase():"")}n=r}if(n)Me(t,"complete"),Me(t,"success");else{t.m=6;try{var i=2<mt(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",gc(t)}}finally{zs(t)}}}}function zs(t,e){if(t.g){vc(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Me(t,"ready");try{n.onreadystatechange=r}catch{}}}function vc(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(K.clearTimeout(t.A),t.A=null)}V.isActive=function(){return!!this.g};function mt(t){return t.g?t.g.readyState:0}V.da=function(){try{return 2<mt(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),yg(e)}};function Qa(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case mc:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function wg(t){const e={};t=(t.g&&2<=mt(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(er(t[r]))continue;var n=Gm(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}Um(e,function(r){return r.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function yc(t){let e="";return Ao(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Lo(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=yc(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):he(t,e,n))}function Mn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function _c(t){this.Ga=0,this.j=[],this.l=new Ms,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Mn("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Mn("baseRetryDelayMs",5e3,t),this.hb=Mn("retryDelaySeedMs",1e4,t),this.eb=Mn("forwardChannelMaxRetries",2,t),this.xa=Mn("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new lc(t&&t.concurrentRequestLimit),this.Ja=new gg,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=_c.prototype;V.ra=8;V.H=1;function Bo(t){if(Ec(t),t.H==3){var e=t.W++,n=St(t.I);if(he(n,"SID",t.K),he(n,"RID",e),he(n,"TYPE","terminate"),Ar(t,n),e=new Tr(t,t.l,e),e.L=2,e.A=$s(St(n)),n=!1,K.navigator&&K.navigator.sendBeacon)try{n=K.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&K.Image&&(new Image().src=e.A,n=!0),n||(e.g=Cc(e.l,null),e.g.ha(e.A)),e.G=Date.now(),wr(e)}bc(t)}function Ks(t){t.g&&($o(t),t.g.cancel(),t.g=null)}function Ec(t){Ks(t),t.u&&(K.clearTimeout(t.u),t.u=null),us(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&K.clearTimeout(t.m),t.m=null)}function Hs(t){if(!uc(t.i)&&!t.m){t.m=!0;var e=t.Na;nr||ju(),rr||(nr(),rr=!0),Po.add(e,t),t.C=0}}function Ig(t,e){return cc(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=_r(qe(t.Na,t,e),Sc(t,t.C)),t.C++,!0)}V.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Tr(this,this.l,t);let i=this.s;if(this.U&&(i?(i=Nu(i),Ou(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Tc(this,s,e),n=St(this.I),he(n,"RID",t),he(n,"CVER",22),this.F&&he(n,"X-HTTP-Session-Id",this.F),Ar(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(yc(i)))+"&"+e:this.o&&Lo(n,this.o,i)),Mo(this.i,s),this.bb&&he(n,"TYPE","init"),this.P?(he(n,"$req",e),he(n,"SID","null"),s.aa=!0,$i(s,n,null)):$i(s,n,e),this.H=2}}else this.H==3&&(t?Xa(this,t):this.j.length==0||uc(this.i)||Xa(this))};function Xa(t,e){var n;e?n=e.m:n=t.W++;const r=St(t.I);he(r,"SID",t.K),he(r,"RID",n),he(r,"AID",t.V),Ar(t,r),t.o&&t.s&&Lo(r,t.o,t.s),n=new Tr(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Tc(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Mo(t.i,n),$i(n,r,e)}function Ar(t,e){t.na&&Ao(t.na,function(n,r){he(e,r,n)}),t.h&&rc({},function(n,r){he(e,r,n)})}function Tc(t,e,n){n=Math.min(t.j.length,n);var r=t.h?qe(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].g;const c=s[l].map;if(u-=i,0>u)i=Math.max(0,s[l].g-100),a=!1;else try{pg(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function wc(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;nr||ju(),rr||(nr(),rr=!0),Po.add(e,t),t.A=0}}function Uo(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=_r(qe(t.Ma,t),Sc(t,t.A)),t.A++,!0)}V.Ma=function(){if(this.u=null,Ic(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=_r(qe(this.jb,this),t)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ge(10),Ks(this),Ic(this))};function $o(t){t.B!=null&&(K.clearTimeout(t.B),t.B=null)}function Ic(t){t.g=new Tr(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=St(t.wa);he(e,"RID","rpc"),he(e,"SID",t.K),he(e,"AID",t.V),he(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&he(e,"TO",t.qa),he(e,"TYPE","xmlhttp"),Ar(t,e),t.o&&t.s&&Lo(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=$s(St(e)),n.u=null,n.S=!0,Zu(n,t)}V.ib=function(){this.v!=null&&(this.v=null,Ks(this),Uo(this),Ge(19))};function us(t){t.v!=null&&(K.clearTimeout(t.v),t.v=null)}function Ac(t,e){var n=null;if(t.g==e){us(t),$o(t),t.g=null;var r=2}else if(qi(t.i,e))n=e.F,hc(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=Fs(),Me(r,new Wu(r,n)),Hs(t)}else wc(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&Ig(t,e)||r==2&&Uo(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Ht(t,5);break;case 4:Ht(t,10);break;case 3:Ht(t,6);break;default:Ht(t,2)}}}function Sc(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ht(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=qe(t.pb,t);n||(n=new Xt("//www.google.com/images/cleardot.gif"),K.location&&K.location.protocol=="http"||as(n,"https"),$s(n)),vg(n.toString(),r)}else Ge(2);t.H=0,t.h&&t.h.za(e),bc(t),Ec(t)}V.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ge(2)):(this.l.info("Failed to ping google.com"),Ge(1))};function bc(t){if(t.H=0,t.ma=[],t.h){const e=dc(t.i);(e.length!=0||t.j.length!=0)&&(Ua(t.ma,e),Ua(t.ma,t.j),t.i.i.length=0,wo(t.j),t.j.length=0),t.h.ya()}}function Vc(t,e,n){var r=n instanceof Xt?St(n):new Xt(n);if(r.g!="")e&&(r.g=e+"."+r.g),ls(r,r.m);else{var s=K.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Xt(null);r&&as(i,r),e&&(i.g=e),s&&ls(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&he(r,n,e),he(r,"VER",t.ra),Ar(t,r),r}function Cc(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new _e(new js({ob:n})):new _e(t.va),e.Oa(t.J),e}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function Rc(){}V=Rc.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function cs(){if(En&&!(10<=Number(Mm)))throw Error("Environmental error: no available transport.")}cs.prototype.g=function(t,e){return new Je(t,e)};function Je(t,e){Pe.call(this),this.g=new _c(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!er(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!er(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new kn(this)}De(Je,Pe);Je.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ge(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Vc(t,null,t.Y),Hs(t)};Je.prototype.close=function(){Bo(this.g)};Je.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ro(t),t=n);e.j.push(new dg(e.fb++,t)),e.H==3&&Hs(e)};Je.prototype.N=function(){this.g.h=null,delete this.j,Bo(this.g),delete this.g,Je.$.N.call(this)};function Pc(t){No.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}De(Pc,No);function kc(){Oo.call(this),this.status=1}De(kc,Oo);function kn(t){this.g=t}De(kn,Rc);kn.prototype.Ba=function(){Me(this.g,"a")};kn.prototype.Aa=function(t){Me(this.g,new Pc(t))};kn.prototype.za=function(t){Me(this.g,new kc)};kn.prototype.ya=function(){Me(this.g,"b")};function Ag(){this.blockSize=-1}function ht(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}De(ht,Ag);ht.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function yi(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}ht.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)yi(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){yi(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){yi(this,r),s=0;break}}this.h=s,this.i+=e};ht.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ie(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var Sg={};function jo(t){return-128<=t&&128>t?xm(t,function(e){return new ie([e|0],0>e?-1:0)}):new ie([t|0],0>t?-1:0)}function gt(t){if(isNaN(t)||!isFinite(t))return mn;if(0>t)return Ne(gt(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=zi;return new ie(e,0)}function Dc(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ne(Dc(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=gt(Math.pow(e,8)),r=mn,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=gt(Math.pow(e,i)),r=r.R(i).add(gt(o))):(r=r.R(n),r=r.add(gt(o)))}return r}var zi=4294967296,mn=jo(0),Ki=jo(1),Ya=jo(16777216);V=ie.prototype;V.ea=function(){if(nt(this))return-Ne(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:zi+r)*e,e*=zi}return t};V.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(wt(this))return"0";if(nt(this))return"-"+Ne(this).toString(t);for(var e=gt(Math.pow(t,6)),n=this,r="";;){var s=ds(n,e).g;n=hs(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,wt(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};V.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function wt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function nt(t){return t.h==-1}V.X=function(t){return t=hs(this,t),nt(t)?-1:wt(t)?0:1};function Ne(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ie(n,~t.h).add(Ki)}V.abs=function(){return nt(this)?Ne(this):this};V.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ie(n,n[n.length-1]&-2147483648?-1:0)};function hs(t,e){return t.add(Ne(e))}V.R=function(t){if(wt(this)||wt(t))return mn;if(nt(this))return nt(t)?Ne(this).R(Ne(t)):Ne(Ne(this).R(t));if(nt(t))return Ne(this.R(Ne(t)));if(0>this.X(Ya)&&0>t.X(Ya))return gt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Lr(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Lr(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Lr(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Lr(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ie(n,0)};function Lr(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Fn(t,e){this.g=t,this.h=e}function ds(t,e){if(wt(e))throw Error("division by zero");if(wt(t))return new Fn(mn,mn);if(nt(t))return e=ds(Ne(t),e),new Fn(Ne(e.g),Ne(e.h));if(nt(e))return e=ds(t,Ne(e)),new Fn(Ne(e.g),e.h);if(30<t.g.length){if(nt(t)||nt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ki,r=e;0>=r.X(t);)n=Ja(n),r=Ja(r);var s=an(n,1),i=an(r,1);for(r=an(r,2),n=an(n,2);!wt(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=an(r,1),n=an(n,1)}return e=hs(t,s.R(e)),new Fn(s,e)}for(s=mn;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=gt(n),o=i.R(e);nt(o)||0<o.X(t);)n-=r,i=gt(n),o=i.R(e);wt(i)&&(i=Ki),s=s.add(i),t=hs(t,o)}return new Fn(s,t)}V.gb=function(t){return ds(this,t).h};V.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ie(n,this.h&t.h)};V.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ie(n,this.h|t.h)};V.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ie(n,this.h^t.h)};function Ja(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ie(n,t.h)}function an(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ie(s,t.h)}cs.prototype.createWebChannel=cs.prototype.g;Je.prototype.send=Je.prototype.u;Je.prototype.open=Je.prototype.m;Je.prototype.close=Je.prototype.close;Ls.NO_ERROR=0;Ls.TIMEOUT=8;Ls.HTTP_ERROR=6;Qu.COMPLETE="complete";Xu.EventType=Er;Er.OPEN="a";Er.CLOSE="b";Er.ERROR="c";Er.MESSAGE="d";Pe.prototype.listen=Pe.prototype.O;_e.prototype.listenOnce=_e.prototype.P;_e.prototype.getLastError=_e.prototype.Sa;_e.prototype.getLastErrorCode=_e.prototype.Ia;_e.prototype.getStatus=_e.prototype.da;_e.prototype.getResponseJson=_e.prototype.Wa;_e.prototype.getResponseText=_e.prototype.ja;_e.prototype.send=_e.prototype.ha;_e.prototype.setWithCredentials=_e.prototype.Oa;ht.prototype.digest=ht.prototype.l;ht.prototype.reset=ht.prototype.reset;ht.prototype.update=ht.prototype.j;ie.prototype.add=ie.prototype.add;ie.prototype.multiply=ie.prototype.R;ie.prototype.modulo=ie.prototype.gb;ie.prototype.compare=ie.prototype.X;ie.prototype.toNumber=ie.prototype.ea;ie.prototype.toString=ie.prototype.toString;ie.prototype.getBits=ie.prototype.D;ie.fromNumber=gt;ie.fromString=Dc;var bg=function(){return new cs},Vg=function(){return Fs()},_i=Ls,Cg=Qu,Rg=tn,Za={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Br=Xu,Pg=_e,kg=ht,gn=ie;const el="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ue.UNAUTHENTICATED=new Ue(null),Ue.GOOGLE_CREDENTIALS=new Ue("google-credentials-uid"),Ue.FIRST_PARTY=new Ue("first-party-uid"),Ue.MOCK_USER=new Ue("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dn="10.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt=new Au("@firebase/firestore");function Ln(){return Jt.logLevel}function b(t,...e){if(Jt.logLevel<=ne.DEBUG){const n=e.map(qo);Jt.debug(`Firestore (${Dn}): ${t}`,...n)}}function yt(t,...e){if(Jt.logLevel<=ne.ERROR){const n=e.map(qo);Jt.error(`Firestore (${Dn}): ${t}`,...n)}}function Tn(t,...e){if(Jt.logLevel<=ne.WARN){const n=e.map(qo);Jt.warn(`Firestore (${Dn}): ${t}`,...n)}}function qo(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(t="Unexpected state"){const e=`FIRESTORE (${Dn}) INTERNAL ASSERTION FAILED: `+t;throw yt(e),new Error(e)}function ce(t,e){t||z()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class N extends Rn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ue.UNAUTHENTICATED))}shutdown(){}}class xg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ng{constructor(e){this.t=e,this.currentUser=Ue.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new It;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new It,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new It)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new xc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new Ue(e)}}class Og{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ue.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Mg{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Og(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ue.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lg{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,b("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new Fg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Bg(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function wn(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new N(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new N(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new N(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new N(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ce(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.timestamp=e}static fromTimestamp(e){return new H(e)}static min(){return new H(new Ce(0,0))}static max(){return new H(new Ce(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(),r===void 0?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class de extends lr{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new N(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new de(n)}static emptyPath(){return new de([])}}const Ug=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oe extends lr{construct(e,n,r){return new Oe(e,n,r)}static isValidIdentifier(e){return Ug.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Oe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new N(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new N(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new N(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new N(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Oe(n)}static emptyPath(){return new Oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.path=e}static fromPath(e){return new B(de.fromString(e))}static fromName(e){return new B(de.fromString(e).popFirst(5))}static empty(){return new B(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new B(new de(e.slice()))}}function $g(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=H.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new xt(s,B.empty(),e)}function jg(t){return new xt(t.readTime,t.key,-1)}class xt{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xt(H.min(),B.empty(),-1)}static max(){return new xt(H.max(),B.empty(),-1)}}function qg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sr(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==zg)throw t;b("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new E((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):E.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):E.reject(n)}static resolve(e){return new E((n,r)=>{n(e)})}static reject(e){return new E((n,r)=>{r(e)})}static waitFor(e){return new E((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=E.resolve(!1);for(const r of e)n=n.next(s=>s?E.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new E((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new E((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new It,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Hn(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Ko(r.target.error);this.V.reject(new Hn(e,s))}}static open(e,n,r,s){try{return new zo(n,e.transaction(s,r))}catch(i){throw new Hn(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(b("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Gg(n)}}class Gt{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Gt.S(ss())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return b("SimpleDb","Removing database:",e),$t(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!wu())return!1;if(Gt.C())return!0;const e=ss(),n=Gt.S(e),r=0<n&&n<10,s=Gt.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(b("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Hn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new N(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new N(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Hn(e,o))},s.onupgradeneeded=i=>{b("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{b("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=zo.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),E.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(b("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Hg{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return $t(this.k.delete())}}class Hn extends N{constructor(e,n){super(w.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function br(t){return t.name==="IndexedDbTransactionError"}class Gg{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(b("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(b("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$t(r)}add(e){return b("SimpleDb","ADD",this.store.name,e,e),$t(this.store.add(e))}get(e){return $t(this.store.get(e)).next(n=>(n===void 0&&(n=null),b("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return b("SimpleDb","DELETE",this.store.name,e),$t(this.store.delete(e))}count(){return b("SimpleDb","COUNT",this.store.name),$t(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new E((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new E((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){b("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new E((r,s)=>{n.onerror=i=>{const o=Ko(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new E((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new Hg(a),u=n(a.primaryKey,a.value,l);if(u instanceof E){const c=u.catch(h=>(l.done(),E.reject(h)));r.push(c)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>E.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function $t(t){return new E((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Ko(r.target.error);n(s)}})}let tl=!1;function Ko(t){const e=Gt.S(ss());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new N("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tl||(tl=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Ho._e=-1;function Gs(t){return t==null}function fs(t){return t===0&&1/t==-1/0}function Wg(t){return typeof t=="number"&&Number.isInteger(t)&&!fs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Oc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e,n){this.comparator=e,this.root=n||xe.EMPTY}insert(e,n){return new ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xe.BLACK,null,null))}remove(e){return new ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ur(this.root,e,this.comparator,!0)}}class Ur{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??xe.RED,this.left=s??xe.EMPTY,this.right=i??xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}}xe.EMPTY=null,xe.RED=!0,xe.BLACK=!1;xe.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rl(this.data.getIterator())}getIteratorFrom(e){return new rl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class rl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.fields=e,e.sort(Oe.comparator)}static empty(){return new ut([])}unionWith(e){let n=new Fe(Oe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wn(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Mc("Invalid base64 string: "+i):i}}(e);return new Ke(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ke(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const Qg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nt(t){if(ce(!!t),typeof t=="string"){let e=0;const n=Qg.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zt(t){return typeof t=="string"?Ke.fromBase64String(t):Ke.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wo(t){const e=t.mapValue.fields.__previous_value__;return Go(e)?Wo(e):e}function ur(t){const e=Nt(t.mapValue.fields.__local_write_time__.timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class cr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function en(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Go(t)?4:Yg(t)?9007199254740991:10:z()}function _t(t,e){if(t===e)return!0;const n=en(t);if(n!==en(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ur(t).isEqual(ur(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Nt(s.timestampValue),a=Nt(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Zt(s.bytesValue).isEqual(Zt(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),a=Ae(i.doubleValue);return o===a?fs(o)===fs(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return wn(t.arrayValue.values||[],e.arrayValue.values||[],_t);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(nl(o)!==nl(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!_t(o[l],a[l])))return!1;return!0}(t,e);default:return z()}}function hr(t,e){return(t.values||[]).find(n=>_t(n,e))!==void 0}function In(t,e){if(t===e)return 0;const n=en(t),r=en(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ae(i.integerValue||i.doubleValue),l=Ae(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return sl(t.timestampValue,e.timestampValue);case 4:return sl(ur(t),ur(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Zt(i),l=Zt(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=se(a[u],l[u]);if(c!==0)return c}return se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=se(Ae(i.latitude),Ae(o.latitude));return a!==0?a:se(Ae(i.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=In(a[u],l[u]);if(c)return c}return se(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===$r.mapValue&&o===$r.mapValue)return 0;if(i===$r.mapValue)return 1;if(o===$r.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=se(l[h],c[h]);if(d!==0)return d;const f=In(a[l[h]],u[c[h]]);if(f!==0)return f}return se(l.length,c.length)}(t.mapValue,e.mapValue);default:throw z()}}function sl(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=Nt(t),r=Nt(e),s=se(n.seconds,r.seconds);return s!==0?s:se(n.nanos,r.nanos)}function An(t){return Hi(t)}function Hi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nt(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zt(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return B.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Hi(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Hi(n.fields[o])}`;return s+"}"}(t.mapValue):z()}function Gi(t){return!!t&&"integerValue"in t}function Qo(t){return!!t&&"arrayValue"in t}function il(t){return!!t&&"nullValue"in t}function ol(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hr(t){return!!t&&"mapValue"in t}function Gn(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return xn(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Gn(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gn(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Yg(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.value=e}static empty(){return new rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hr(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gn(n)}setAll(e){let n=Oe.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Gn(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Hr(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _t(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hr(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){xn(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new rt(Gn(this.value))}}function Fc(t){const e=[];return xn(t.fields,(n,r)=>{const s=new Oe([n]);if(Hr(r)){const i=Fc(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $e(e,0,H.min(),H.min(),H.min(),rt.empty(),0)}static newFoundDocument(e,n,r,s){return new $e(e,1,n,H.min(),r,s,0)}static newNoDocument(e,n){return new $e(e,2,n,H.min(),H.min(),rt.empty(),0)}static newUnknownDocument(e,n){return new $e(e,3,n,H.min(),H.min(),rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.position=e,this.inclusive=n}}function al(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=B.comparator(B.fromName(o.referenceValue),n.key):r=In(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ll(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_t(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n="asc"){this.field=e,this.dir=n}}function Jg(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{}class Ve extends Lc{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ep(e,n,r):n==="array-contains"?new rp(e,r):n==="in"?new sp(e,r):n==="not-in"?new ip(e,r):n==="array-contains-any"?new op(e,r):new Ve(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tp(e,r):new np(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(In(n,this.value)):n!==null&&en(this.value)===en(n)&&this.matchesComparison(In(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Et extends Lc{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Et(e,n)}matches(e){return Bc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Bc(t){return t.op==="and"}function Uc(t){return Zg(t)&&Bc(t)}function Zg(t){for(const e of t.filters)if(e instanceof Et)return!1;return!0}function Wi(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+An(t.value);if(Uc(t))return t.filters.map(e=>Wi(e)).join(",");{const e=t.filters.map(n=>Wi(n)).join(",");return`${t.op}(${e})`}}function $c(t,e){return t instanceof Ve?function(r,s){return s instanceof Ve&&r.op===s.op&&r.field.isEqual(s.field)&&_t(r.value,s.value)}(t,e):t instanceof Et?function(r,s){return s instanceof Et&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&$c(o,s.filters[a]),!0):!1}(t,e):void z()}function jc(t){return t instanceof Ve?function(n){return`${n.field.canonicalString()} ${n.op} ${An(n.value)}`}(t):t instanceof Et?function(n){return n.op.toString()+" {"+n.getFilters().map(jc).join(" ,")+"}"}(t):"Filter"}class ep extends Ve{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){const n=B.comparator(e.key,this.key);return this.matchesComparison(n)}}class tp extends Ve{constructor(e,n){super(e,"in",n),this.keys=qc("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class np extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=qc("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qc(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}class rp extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qo(n)&&hr(n.arrayValue,this.value)}}class sp extends Ve{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hr(this.value.arrayValue,n)}}class ip extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(hr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!hr(this.value.arrayValue,n)}}class op extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hr(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function ul(t,e=null,n=[],r=[],s=null,i=null,o=null){return new ap(t,e,n,r,s,i,o)}function Xo(t){const e=X(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wi(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Gs(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>An(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>An(r)).join(",")),e.ce=n}return e.ce}function Yo(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Jg(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$c(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ll(t.startAt,e.startAt)&&ll(t.endAt,e.endAt)}function Qi(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function lp(t,e,n,r,s,i,o,a){return new Ws(t,e,n,r,s,i,o,a)}function zc(t){return new Ws(t)}function cl(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function up(t){return t.collectionGroup!==null}function Wn(t){const e=X(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fe(Oe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new gs(i,r))}),n.has(Oe.keyField().canonicalString())||e.le.push(new gs(Oe.keyField(),r))}return e.le}function pt(t){const e=X(t);return e.he||(e.he=cp(e,Wn(t))),e.he}function cp(t,e){if(t.limitType==="F")return ul(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new gs(s.field,i)});const n=t.endAt?new ms(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ms(t.startAt.position,t.startAt.inclusive):null;return ul(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xi(t,e,n){return new Ws(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qs(t,e){return Yo(pt(t),pt(e))&&t.limitType===e.limitType}function Kc(t){return`${Xo(pt(t))}|lt:${t.limitType}`}function ln(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>jc(s)).join(", ")}]`),Gs(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>An(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>An(s)).join(",")),`Target(${r})`}(pt(t))}; limitType=${t.limitType})`}function Xs(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):B.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Wn(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=al(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Wn(r),s)||r.endAt&&!function(o,a,l){const u=al(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Wn(r),s))}(t,e)}function hp(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hc(t){return(e,n)=>{let r=!1;for(const s of Wn(t)){const i=dp(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function dp(t,e,n){const r=t.field.isKeyField()?B.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?In(l,u):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){xn(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Oc(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=new ge(B.comparator);function bt(){return fp}const Gc=new ge(B.comparator);function qn(...t){let e=Gc;for(const n of t)e=e.insert(n.key,n);return e}function Wc(t){let e=Gc;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wt(){return Qn()}function Qc(){return Qn()}function Qn(){return new Nn(t=>t.toString(),(t,e)=>t.isEqual(e))}const mp=new ge(B.comparator),gp=new Fe(B.comparator);function J(...t){let e=gp;for(const n of t)e=e.add(n);return e}const pp=new Fe(se);function vp(){return pp}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fs(e)?"-0":e}}function Yc(t){return{integerValue:""+t}}function yp(t,e){return Wg(e)?Yc(e):Xc(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this._=void 0}}function _p(t,e,n){return t instanceof ps?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Go(i)&&(i=Wo(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof dr?Zc(t,e):t instanceof fr?eh(t,e):function(s,i){const o=Jc(s,i),a=hl(o)+hl(s.Ie);return Gi(o)&&Gi(s.Ie)?Yc(a):Xc(s.serializer,a)}(t,e)}function Ep(t,e,n){return t instanceof dr?Zc(t,e):t instanceof fr?eh(t,e):n}function Jc(t,e){return t instanceof vs?function(r){return Gi(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ps extends Ys{}class dr extends Ys{constructor(e){super(),this.elements=e}}function Zc(t,e){const n=th(e);for(const r of t.elements)n.some(s=>_t(s,r))||n.push(r);return{arrayValue:{values:n}}}class fr extends Ys{constructor(e){super(),this.elements=e}}function eh(t,e){let n=th(e);for(const r of t.elements)n=n.filter(s=>!_t(s,r));return{arrayValue:{values:n}}}class vs extends Ys{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function hl(t){return Ae(t.integerValue||t.doubleValue)}function th(t){return Qo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Tp(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof dr&&s instanceof dr||r instanceof fr&&s instanceof fr?wn(r.elements,s.elements,_t):r instanceof vs&&s instanceof vs?_t(r.Ie,s.Ie):r instanceof ps&&s instanceof ps}(t.transform,e.transform)}class wp{constructor(e,n){this.version=e,this.transformResults=n}}class At{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new At}static exists(e){return new At(void 0,e)}static updateTime(e){return new At(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gr(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Js{}function nh(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sh(t.key,At.none()):new Vr(t.key,t.data,At.none());{const n=t.data,r=rt.empty();let s=new Fe(Oe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new nn(t.key,r,new ut(s.toArray()),At.none())}}function Ip(t,e,n){t instanceof Vr?function(s,i,o){const a=s.value.clone(),l=fl(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof nn?function(s,i,o){if(!Gr(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=fl(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(rh(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xn(t,e,n,r){return t instanceof Vr?function(i,o,a,l){if(!Gr(i.precondition,o))return a;const u=i.value.clone(),c=ml(i.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof nn?function(i,o,a,l){if(!Gr(i.precondition,o))return a;const u=ml(i.fieldTransforms,l,o),c=o.data;return c.setAll(rh(i)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Gr(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Ap(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Jc(r.transform,s||null);i!=null&&(n===null&&(n=rt.empty()),n.set(r.field,i))}return n||null}function dl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wn(r,s,(i,o)=>Tp(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vr extends Js{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class nn extends Js{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function rh(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fl(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Ep(o,a,n[s]))}return r}function ml(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,_p(i,o,e))}return r}class sh extends Js{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sp extends Js{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Ip(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xn(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xn(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Qc();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=nh(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),J())}isEqual(e){return this.batchId===e.batchId&&wn(this.mutations,e.mutations,(n,r)=>dl(n,r))&&wn(this.baseMutations,e.baseMutations,(n,r)=>dl(n,r))}}class Jo{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return mp}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Jo(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,ee;function Rp(t){switch(t){default:return z();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function ih(t){if(t===void 0)return yt("GRPC error has no .code"),w.UNKNOWN;switch(t){case we.OK:return w.OK;case we.CANCELLED:return w.CANCELLED;case we.UNKNOWN:return w.UNKNOWN;case we.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case we.INTERNAL:return w.INTERNAL;case we.UNAVAILABLE:return w.UNAVAILABLE;case we.UNAUTHENTICATED:return w.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case we.NOT_FOUND:return w.NOT_FOUND;case we.ALREADY_EXISTS:return w.ALREADY_EXISTS;case we.PERMISSION_DENIED:return w.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case we.ABORTED:return w.ABORTED;case we.OUT_OF_RANGE:return w.OUT_OF_RANGE;case we.UNIMPLEMENTED:return w.UNIMPLEMENTED;case we.DATA_LOSS:return w.DATA_LOSS;default:return z()}}(ee=we||(we={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=new gn([4294967295,4294967295],0);function gl(t){const e=Pp().encode(t),n=new kg;return n.update(e),new Uint8Array(n.digest())}function pl(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new gn([n,r],0),new gn([s,i],0)]}class Zo{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zn(`Invalid padding: ${n}`);if(r<0)throw new zn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zn(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zn(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=gn.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(gn.fromNumber(r)));return s.compare(kp)===1&&(s=new gn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=gl(e),[r,s]=pl(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Zo(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=gl(e),[r,s]=pl(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Cr.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zs(H.min(),s,new ge(se),bt(),J())}}class Cr{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cr(r,n,J(),J(),J())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class oh{constructor(e,n){this.targetId=e,this.fe=n}}class ah{constructor(e,n,r=Ke.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class vl{constructor(){this.ge=0,this.pe=_l(),this.ye=Ke.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=J(),n=J(),r=J();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:z()}}),new Cr(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=_l()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ce(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Dp{constructor(e){this.Le=e,this.ke=new Map,this.qe=bt(),this.Qe=yl(),this.Ke=new ge(se)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Qi(i))if(r===0){const o=new B(i.path);this.We(n,o,$e.newNoDocument(o,H.min()))}else ce(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Zt(r).toUint8Array()}catch(l){if(l instanceof Mc)return Tn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Zo(o,s,i)}catch(l){return Tn(l instanceof zn?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Qi(a.target)){const l=new B(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,$e.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=J();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new Zs(e,n,this.Ke,this.qe,r);return this.qe=bt(),this.Qe=yl(),this.Ke=new ge(se),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new vl,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Fe(se),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||b("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new vl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function yl(){return new ge(B.comparator)}function _l(){return new ge(B.comparator)}const xp=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Np=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Op=(()=>({and:"AND",or:"OR"}))();class Mp{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yi(t,e){return t.useProto3Json||Gs(e)?e:{value:e}}function ys(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lh(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Fp(t,e){return ys(t,e.toTimestamp())}function vt(t){return ce(!!t),H.fromTimestamp(function(n){const r=Nt(n);return new Ce(r.seconds,r.nanos)}(t))}function ea(t,e){return Ji(t,e).canonicalString()}function Ji(t,e){const n=function(s){return new de(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uh(t){const e=de.fromString(t);return ce(mh(e)),e}function Zi(t,e){return ea(t.databaseId,e.path)}function Ei(t,e){const n=uh(e);if(n.get(1)!==t.databaseId.projectId)throw new N(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new N(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(hh(n))}function ch(t,e){return ea(t.databaseId,e)}function Lp(t){const e=uh(t);return e.length===4?de.emptyPath():hh(e)}function eo(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hh(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function El(t,e,n){return{name:Zi(t,e),fields:n.value.mapValue.fields}}function Bp(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,c){return u.useProto3Json?(ce(c===void 0||typeof c=="string"),Ke.fromBase64String(c||"")):(ce(c===void 0||c instanceof Uint8Array),Ke.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?w.UNKNOWN:ih(u.code);return new N(c,u.message||"")}(o);n=new ah(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ei(t,r.document.name),i=vt(r.document.updateTime),o=r.document.createTime?vt(r.document.createTime):H.min(),a=new rt({mapValue:{fields:r.document.fields}}),l=$e.newFoundDocument(s,i,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Wr(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ei(t,r.document),i=r.readTime?vt(r.readTime):H.min(),o=$e.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Wr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ei(t,r.document),i=r.removedTargetIds||[];n=new Wr([],i,s,null)}else{if(!("filter"in e))return z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Cp(s,i),a=r.targetId;n=new oh(a,o)}}return n}function Up(t,e){let n;if(e instanceof Vr)n={update:El(t,e.key,e.value)};else if(e instanceof sh)n={delete:Zi(t,e.key)};else if(e instanceof nn)n={update:El(t,e.key,e.data),updateMask:Qp(e.fieldMask)};else{if(!(e instanceof Sp))return z();n={verify:Zi(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ps)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof dr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vs)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Fp(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:z()}(t,e.precondition)),n}function $p(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?vt(s.updateTime):vt(i);return o.isEqual(H.min())&&(o=vt(i)),new wp(o,s.transformResults||[])}(n,e))):[]}function jp(t,e){return{documents:[ch(t,e.path)]}}function qp(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ch(t,s);const i=function(u){if(u.length!==0)return fh(Et.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:un(d.field),direction:Hp(d.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Yi(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:s}}function zp(t){let e=Lp(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=function(h){const d=dh(h);return d instanceof Et&&Uc(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(y){return new gs(cn(y.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Gs(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new ms(f,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,f=h.values||[];return new ms(f,d)}(n.endAt)),lp(e,s,o,i,a,"F",l,u)}function Kp(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dh(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=cn(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=cn(n.unaryFilter.field);return Ve.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=cn(n.unaryFilter.field);return Ve.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cn(n.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(t):t.fieldFilter!==void 0?function(n){return Ve.create(cn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Et.create(n.compositeFilter.filters.map(r=>dh(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(t):z()}function Hp(t){return xp[t]}function Gp(t){return Np[t]}function Wp(t){return Op[t]}function un(t){return{fieldPath:t.canonicalString()}}function cn(t){return Oe.fromServerFormat(t.fieldPath)}function fh(t){return t instanceof Ve?function(n){if(n.op==="=="){if(ol(n.value))return{unaryFilter:{field:un(n.field),op:"IS_NAN"}};if(il(n.value))return{unaryFilter:{field:un(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ol(n.value))return{unaryFilter:{field:un(n.field),op:"IS_NOT_NAN"}};if(il(n.value))return{unaryFilter:{field:un(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:un(n.field),op:Gp(n.op),value:n.value}}}(t):t instanceof Et?function(n){const r=n.getFilters().map(s=>fh(s));return r.length===1?r[0]:{compositeFilter:{op:Wp(n.op),filters:r}}}(t):z()}function Qp(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mh(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,r,s,i=H.min(),o=H.min(),a=Ke.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ct(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ct(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ct(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ct(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this.ct=e}}function Yp(t){const e=zp({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xi(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this._n=new Zp}addToCollectionParentIndex(e,n){return this._n.add(n),E.resolve()}getCollectionParents(e,n){return E.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return E.resolve()}deleteFieldIndex(e,n){return E.resolve()}deleteAllFieldIndexes(e){return E.resolve()}createTargetIndexes(e,n){return E.resolve()}getDocumentsMatchingTarget(e,n){return E.resolve(null)}getIndexType(e,n){return E.resolve(0)}getFieldIndexes(e,n){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,n){return E.resolve(xt.min())}getMinOffsetFromCollectionGroup(e,n){return E.resolve(xt.min())}updateCollectionGroup(e,n,r){return E.resolve()}updateIndexEntries(e,n){return E.resolve()}}class Zp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Fe(de.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Fe(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Sn(0)}static Bn(){return new Sn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.changes=new Nn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?E.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Xn(r.mutation,s,ut.empty(),Ce.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,J()).next(()=>r))}getLocalViewOfDocuments(e,n,r=J()){const s=Wt();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qn();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Wt();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,J()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=bt();const o=Qn(),a=function(){return Qn()}();return n.forEach((l,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof nn)?i=i.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Xn(c.mutation,u,c.mutation.getFieldMask(),Ce.now())):o.set(u.key,ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new tv(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Qn();let s=new ge((o,a)=>o-a),i=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||ut.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(s.get(a.batchId)||J()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=Qc();c.forEach(d=>{if(!i.has(d)){const f=nh(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return B.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):up(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):E.resolve(Wt());let a=-1,l=i;return o.next(u=>E.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?E.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,J())).next(c=>({batchId:a,changes:Wc(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let s=qn();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qn();return this.indexManager.getCollectionParents(e,i).next(a=>E.forEach(a,l=>{const u=function(h,d){return new Ws(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(c=>{c.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,$e.newInvalidDocument(c)))});let a=qn();return o.forEach((l,u)=>{const c=i.get(l);c!==void 0&&Xn(c.mutation,u,ut.empty(),Ce.now()),Xs(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return E.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:vt(s.createTime)}}(n)),E.resolve()}getNamedQuery(e,n){return E.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:Yp(s.bundledQuery),readTime:vt(s.readTime)}}(n)),E.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.overlays=new ge(B.comparator),this.hr=new Map}getOverlay(e,n){return E.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wt();return E.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),E.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),E.resolve()}getOverlaysForCollection(e,n,r){const s=Wt(),i=n.length+1,o=new B(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return E.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ge((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=Wt(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Wt(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return E.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vp(n,r));let i=this.hr.get(n);i===void 0&&(i=J(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.Pr=new Fe(Re.Ir),this.Tr=new Fe(Re.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Re(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Re(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new B(new de([])),r=new Re(n,e),s=new Re(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new B(new de([])),r=new Re(n,e),s=new Re(n,e+1);let i=J();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Re(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Re{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return B.comparator(e.key,n.key)||se(e.pr,n.pr)}static Er(e,n){return se(e.pr,n.pr)||B.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Fe(Re.Ir)}checkEmpty(e){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bp(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Re(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,n){return E.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return E.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Re(n,0),s=new Re(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),E.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(se);return n.forEach(s=>{const i=new Re(s,0),o=new Re(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),E.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;B.isDocumentKey(i)||(i=i.child(""));const o=new Re(new B(i),0);let a=new Fe(se);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.pr)),!0)},o),E.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return E.forEach(n.mutations,s=>{const i=new Re(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Re(n,0),s=this.wr.firstAfterOrEqual(r);return E.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,E.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this.vr=e,this.docs=function(){return new ge(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(e,n){let r=bt();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$e.newInvalidDocument(s))}),E.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=bt();const o=n.path,a=new B(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||qg(jg(c),r)<=0||(s.has(c.key)||Xs(n,c))&&(i=i.insert(c.key,c.mutableCopy()))}return E.resolve(i)}getAllFromCollectionGroup(e,n,r,s){z()}Fr(e,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new av(this)}getSize(e){return E.resolve(this.size)}}class av extends ev{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),E.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.persistence=e,this.Mr=new Nn(n=>Xo(n),Yo),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ta,this.targetCount=0,this.Br=Sn.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),E.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Sn(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,E.resolve()}updateTargetData(e,n){return this.qn(n),E.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),E.waitFor(i).next(()=>s)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return E.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),E.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),E.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),E.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return E.resolve(r)}containsKey(e,n){return E.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Ho(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new lv(this),this.indexManager=new Jp,this.remoteDocumentCache=function(s){return new ov(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Xp(n),this.$r=new rv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new iv(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){b("MemoryPersistence","Starting transaction:",e);const s=new cv(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return E.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class cv extends Kg{constructor(e){super(),this.currentSequenceNumber=e}}class na{constructor(e){this.persistence=e,this.zr=new ta,this.jr=null}static Hr(e){return new na(e)}get Jr(){if(this.jr)return this.jr;throw z()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),E.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),E.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),E.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Jr,r=>{const s=B.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,H.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return E.or([()=>E.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=J(),s=J();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ra(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ff()?8:Gt.v(ss())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new hv;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Ln()<=ne.DEBUG&&b("QueryEngine","SDK will not create cache indexes for query:",ln(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),E.resolve()):(Ln()<=ne.DEBUG&&b("QueryEngine","Query:",ln(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Ln()<=ne.DEBUG&&b("QueryEngine","The SDK decides to create cache indexes for query:",ln(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pt(n))):E.resolve())}ji(e,n){if(cl(n))return E.resolve(null);let r=pt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Xi(n,null,"F"),r=pt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=J(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(e,Xi(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,r,s){return cl(n)||s.isEqual(H.min())?E.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?E.resolve(null):(Ln()<=ne.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ln(n)),this.es(e,o,n,$g(s,-1)).next(a=>a))})}Zi(e,n){let r=new Fe(Hc(e));return n.forEach((s,i)=>{Xs(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return Ln()<=ne.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",ln(n)),this.zi.getDocumentsMatchingQuery(e,n,xt.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new ge(se),this.rs=new Nn(i=>Xo(i),Yo),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nv(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function mv(t,e,n,r){return new fv(t,e,n,r)}async function gh(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=J();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function gv(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,d=h.keys();let f=E.resolve();return d.forEach(y=>{f=f.next(()=>c.getEntry(l,y)).next(p=>{const g=u.docVersions.get(y);ce(g!==null),p.version.compareTo(g)<0&&(h.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),c.addEntry(p)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=J();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ph(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function pv(t,e){const n=X(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((c,h)=>{const d=s.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,c.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Ke.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),s=s.insert(h,f),function(p,g,T){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(d,f,c)&&a.push(n.Qr.updateTargetData(i,f))});let l=bt(),u=J();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(vv(i,o,e.documentUpdates).next(c=>{l=c.cs,u=c.ls})),!r.isEqual(H.min())){const c=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return E.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.ns=s,i))}function vv(t,e,n){let r=J(),s=J();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=bt();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(H.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):b("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:s}})}function yv(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _v(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,E.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Ct(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function to(t,e,n){const r=X(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!br(o))throw o;b("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function Tl(t,e,n){const r=X(t);let s=H.min(),i=J();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const h=X(l),d=h.rs.get(c);return d!==void 0?E.resolve(h.ns.get(d)):h.Qr.getTargetData(u,c)}(r,o,pt(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:H.min(),n?i:J())).next(a=>(Ev(r,hp(e),a),{documents:a,hs:i})))}function Ev(t,e,n){let r=t.ss.get(e)||H.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class wl{constructor(){this.activeTargetIds=vp()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tv{constructor(){this.no=new wl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new wl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){b("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jr=null;function Ti(){return jr===null?jr=function(){return 268435456+Math.round(2147483648*Math.random())}():jr++,"0x"+jr.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be="WebChannelConnection";class Sv extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=Ti(),l=this.bo(n,r.toUriEncodedString());b("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,i,o),this.Co(n,l,u,s).then(c=>(b("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Tn("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",s),c})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Dn}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=Iv[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=Ti();return new Promise((o,a)=>{const l=new Pg;l.setWithCredentials(!0),l.listenOnce(Cg.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _i.NO_ERROR:const c=l.getResponseJson();b(Be,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(c)),o(c);break;case _i.TIMEOUT:b(Be,`RPC '${e}' ${i} timed out`),a(new N(w.DEADLINE_EXCEEDED,"Request time out"));break;case _i.HTTP_ERROR:const h=l.getStatus();if(b(Be,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const y=function(g){const T=g.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(T)>=0?T:w.UNKNOWN}(f.status);a(new N(y,f.message))}else a(new N(w.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new N(w.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{b(Be,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);b(Be,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Fo(e,n,r){const s=Ti(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bg(),a=Vg(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=i.join("");b(Be,`Creating RPC '${e}' stream ${s}: ${c}`,l);const h=o.createWebChannel(c,l);let d=!1,f=!1;const y=new Av({lo:g=>{f?b(Be,`Not sending because RPC '${e}' stream ${s} is closed:`,g):(d||(b(Be,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),b(Be,`RPC '${e}' stream ${s} sending:`,g),h.send(g))},ho:()=>h.close()}),p=(g,T,A)=>{g.listen(T,v=>{try{A(v)}catch(O){setTimeout(()=>{throw O},0)}})};return p(h,Br.EventType.OPEN,()=>{f||b(Be,`RPC '${e}' stream ${s} transport opened.`)}),p(h,Br.EventType.CLOSE,()=>{f||(f=!0,b(Be,`RPC '${e}' stream ${s} transport closed`),y.Vo())}),p(h,Br.EventType.ERROR,g=>{f||(f=!0,Tn(Be,`RPC '${e}' stream ${s} transport errored:`,g),y.Vo(new N(w.UNAVAILABLE,"The operation could not be completed")))}),p(h,Br.EventType.MESSAGE,g=>{var T;if(!f){const A=g.data[0];ce(!!A);const v=A,O=v.error||((T=v[0])===null||T===void 0?void 0:T.error);if(O){b(Be,`RPC '${e}' stream ${s} received error:`,O);const M=O.status;let C=function(k){const U=we[k];if(U!==void 0)return ih(U)}(M),R=O.message;C===void 0&&(C=w.INTERNAL,R="Unknown error status: "+M+" with message "+O.message),f=!0,y.Vo(new N(C,R)),h.close()}else b(Be,`RPC '${e}' stream ${s} received:`,A),y.mo(A)}}),p(a,Rg.STAT_EVENT,g=>{g.stat===Za.PROXY?b(Be,`RPC '${e}' stream ${s} detected buffering proxy`):g.stat===Za.NOPROXY&&b(Be,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}}function wi(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t){return new Mp(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,n-r);s>0&&b("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new vh(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(yt(n.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===w.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new N(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return b("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bv extends yh{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=Bp(this.serializer,e),r=function(i){if(!("targetChange"in i))return H.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?H.min():o.readTime?vt(o.readTime):H.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=eo(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Qi(l)?{documents:jp(i,l)}:{query:qp(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lh(i,o.resumeToken);const u=Yi(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(H.min())>0){a.readTime=ys(i,o.snapshotVersion.toTimestamp());const u=Yi(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Kp(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=eo(this.serializer),n.removeTarget=e,this.t_(n)}}class Vv extends yh{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=$p(e.writeResults,e.commitTime),r=vt(e.commitTime);return this.listener.T_(r,n)}return ce(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=eo(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Up(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new N(w.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,Ji(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new N(w.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Ji(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new N(w.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Rv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(yt(n),this.g_=!1):b("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{rn(this)&&(b("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=X(l);u.v_.add(4),await Rr(u),u.x_.set("Unknown"),u.v_.delete(4),await ti(u)}(this))})}),this.x_=new Rv(r,s)}}async function ti(t){if(rn(t))for(const e of t.F_)await e(!0)}async function Rr(t){for(const e of t.F_)await e(!1)}function _h(t,e){const n=X(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),oa(n)?ia(n):On(n).Jo()&&sa(n,e))}function Eh(t,e){const n=X(t),r=On(n);n.C_.delete(e),r.Jo()&&Th(n,e),n.C_.size===0&&(r.Jo()?r.Xo():rn(n)&&n.x_.set("Unknown"))}function sa(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}On(t).c_(e)}function Th(t,e){t.O_.Oe(e),On(t).l_(e)}function ia(t){t.O_=new Dp({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),On(t).start(),t.x_.p_()}function oa(t){return rn(t)&&!On(t).Ho()&&t.C_.size>0}function rn(t){return X(t).v_.size===0}function wh(t){t.O_=void 0}async function kv(t){t.C_.forEach((e,n)=>{sa(t,e)})}async function Dv(t,e){wh(t),oa(t)?(t.x_.S_(e),ia(t)):t.x_.set("Unknown")}async function xv(t,e,n){if(t.x_.set("Online"),e instanceof ah&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){b("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _s(t,r)}else if(e instanceof Wr?t.O_.$e(e):e instanceof oh?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(H.min()))try{const r=await ph(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=i.C_.get(u);c&&i.C_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=i.C_.get(l);if(!c)return;i.C_.set(l,c.withResumeToken(Ke.EMPTY_BYTE_STRING,c.snapshotVersion)),Th(i,l);const h=new Ct(c.target,l,u,c.sequenceNumber);sa(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){b("RemoteStore","Failed to raise snapshot:",r),await _s(t,r)}}async function _s(t,e,n){if(!br(e))throw e;t.v_.add(1),await Rr(t),t.x_.set("Offline"),n||(n=()=>ph(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{b("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await ti(t)})}function Ih(t,e){return e().catch(n=>_s(t,n,e))}async function ni(t){const e=X(t),n=Ot(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Nv(e);)try{const s=await yv(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,Ov(e,s)}catch(s){await _s(e,s)}Ah(e)&&Sh(e)}function Nv(t){return rn(t)&&t.D_.length<10}function Ov(t,e){t.D_.push(e);const n=Ot(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Ah(t){return rn(t)&&!Ot(t).Ho()&&t.D_.length>0}function Sh(t){Ot(t).start()}async function Mv(t){Ot(t).d_()}async function Fv(t){const e=Ot(t);for(const n of t.D_)e.I_(n.mutations)}async function Lv(t,e,n){const r=t.D_.shift(),s=Jo.from(r,e,n);await Ih(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ni(t)}async function Bv(t,e){e&&Ot(t).P_&&await async function(r,s){if(function(o){return Rp(o)&&o!==w.ABORTED}(s.code)){const i=r.D_.shift();Ot(r).Zo(),await Ih(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ni(r)}}(t,e),Ah(t)&&Sh(t)}async function Al(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");const r=rn(n);n.v_.add(3),await Rr(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await ti(n)}async function Uv(t,e){const n=X(t);e?(n.v_.delete(2),await ti(n)):e||(n.v_.add(2),await Rr(n),n.x_.set("Unknown"))}function On(t){return t.N_||(t.N_=function(n,r,s){const i=X(n);return i.R_(),new bv(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:kv.bind(null,t),To:Dv.bind(null,t),u_:xv.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),oa(t)?ia(t):t.x_.set("Unknown")):(await t.N_.stop(),wh(t))})),t.N_}function Ot(t){return t.B_||(t.B_=function(n,r,s){const i=X(n);return i.R_(),new Vv(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:Mv.bind(null,t),To:Bv.bind(null,t),E_:Fv.bind(null,t),T_:Lv.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await ni(t)):(await t.B_.stop(),t.D_.length>0&&(b("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new It,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new aa(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new N(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function la(t,e){if(yt("AsyncQueue",`${e}: ${t}`),br(t))return new N(w.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=qn(),this.sortedSet=new ge(this.comparator)}static emptySet(e){return new pn(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.L_=new ge(B.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):z():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class bn{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bn(e,n,pn.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.q_=void 0,this.Q_=[]}}class jv{constructor(){this.queries=new Nn(e=>Kc(e),Qs),this.onlineState="Unknown",this.K_=new Set}}async function qv(t,e){const n=X(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new $v),s)try{i.q_=await n.onListen(r)}catch(o){const a=la(o,`Initialization of query '${ln(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Q_.push(e),e.U_(n.onlineState),i.q_&&e.W_(i.q_)&&ua(n)}async function zv(t,e){const n=X(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),s=i.Q_.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function Kv(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.W_(s)&&(r=!0);o.q_=s}}r&&ua(n)}function Hv(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function ua(t){t.K_.forEach(e=>{e.next()})}class Gv{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bn(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=bn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.key=e}}class Vh{constructor(e){this.key=e}}class Wv{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=J(),this.mutatedKeys=J(),this.ua=Hc(e),this.ca=new pn(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new Sl,s=n?n.ca:this.ca;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,h)=>{const d=s.get(c),f=Xs(this.query,h)?h:null,y=!!d&&this.mutatedKeys.has(d.key),p=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;d&&f?d.data.isEqual(f.data)?y!==p&&(r.track({type:3,doc:f}),g=!0):this.Ia(d,f)||(r.track({type:2,doc:f}),g=!0,(l&&this.ua(f,l)>0||u&&this.ua(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),g=!0):d&&!f&&(r.track({type:1,doc:d}),g=!0,(l||u)&&(a=!0)),g&&(f?(o=o.add(f),i=p?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{ca:o,Pa:r,Xi:a,mutatedKeys:i}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((c,h)=>function(f,y){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return p(f)-p(y)}(c.type,h.type)||this.ua(c.doc,h.doc)),this.Ta(r),s=s!=null&&s;const a=n&&!s?this.Ea():[],l=this.aa.size===0&&this.current&&!s?1:0,u=l!==this._a;return this._a=l,o.length!==0||u?{snapshot:new bn(this.query,e.ca,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Sl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=J(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Vh(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new bh(r))}),n}Ra(e){this.oa=e.hs,this.aa=J();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return bn.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class Qv{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Xv{constructor(e){this.key=e,this.ma=!1}}class Yv{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Nn(a=>Kc(a),Qs),this.pa=new Map,this.ya=new Set,this.wa=new ge(B.comparator),this.Sa=new Map,this.ba=new ta,this.Da={},this.Ca=new Map,this.va=Sn.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function Jv(t,e){const n=ly(t);let r,s;const i=n.ga.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{const o=await _v(n.localStore,pt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await Zv(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&_h(n.remoteStore,o)}return s}async function Zv(t,e,n,r,s){t.Ma=(h,d,f)=>async function(p,g,T,A){let v=g.view.ha(T);v.Xi&&(v=await Tl(p.localStore,g.query,!1).then(({documents:R})=>g.view.ha(R,v)));const O=A&&A.targetChanges.get(g.targetId),M=A&&A.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(v,p.isPrimaryClient,O,M);return Vl(p,g.targetId,C.da),C.snapshot}(t,h,d,f);const i=await Tl(t.localStore,e,!0),o=new Wv(e,i.hs),a=o.ha(i.documents),l=Cr.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);Vl(t,n,u.da);const c=new Qv(e,n,o);return t.ga.set(e,c),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot}async function ey(t,e){const n=X(t),r=n.ga.get(e),s=n.pa.get(r.targetId);if(s.length>1)return n.pa.set(r.targetId,s.filter(i=>!Qs(i,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await to(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Eh(n.remoteStore,r.targetId),no(n,r.targetId)}).catch(Sr)):(no(n,r.targetId),await to(n.localStore,r.targetId,!0))}async function ty(t,e,n){const r=uy(t);try{const s=await function(o,a){const l=X(o),u=Ce.now(),c=a.reduce((f,y)=>f.add(y.key),J());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let y=bt(),p=J();return l.os.getEntries(f,c).next(g=>{y=g,y.forEach((T,A)=>{A.isValidDocument()||(p=p.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,y)).next(g=>{h=g;const T=[];for(const A of a){const v=Ap(A,h.get(A.key).overlayedDocument);v!=null&&T.push(new nn(A.key,v,Fc(v.value.mapValue),At.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,T,a)}).next(g=>{d=g;const T=g.applyToLocalDocumentSet(h,p);return l.documentOverlayCache.saveOverlays(f,g.batchId,T)})}).then(()=>({batchId:d.batchId,changes:Wc(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Da[o.currentUser.toKey()];u||(u=new ge(se)),u=u.insert(a,l),o.Da[o.currentUser.toKey()]=u}(r,s.batchId,n),await Pr(r,s.changes),await ni(r.remoteStore)}catch(s){const i=la(s,"Failed to persist write");n.reject(i)}}async function Ch(t,e){const n=X(t);try{const r=await pv(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Sa.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?ce(o.ma):s.removedDocuments.size>0&&(ce(o.ma),o.ma=!1))}),await Pr(n,r,e)}catch(r){await Sr(r)}}function bl(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((i,o)=>{const a=o.view.U_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=X(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.Q_)d.U_(a)&&(u=!0)}),u&&ua(l)}(r.eventManager,e),s.length&&r.fa.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ny(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Sa.get(e),i=s&&s.key;if(i){let o=new ge(B.comparator);o=o.insert(i,$e.newNoDocument(i,H.min()));const a=J().add(i),l=new Zs(H.min(),new Map,new ge(se),o,a);await Ch(r,l),r.wa=r.wa.remove(i),r.Sa.delete(e),ca(r)}else await to(r.localStore,e,!1).then(()=>no(r,e,n)).catch(Sr)}async function ry(t,e){const n=X(t),r=e.batch.batchId;try{const s=await gv(n.localStore,e);Ph(n,r,null),Rh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pr(n,s)}catch(s){await Sr(s)}}async function sy(t,e,n){const r=X(t);try{const s=await function(o,a){const l=X(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ce(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);Ph(r,e,n),Rh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pr(r,s)}catch(s){await Sr(s)}}function Rh(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function Ph(t,e,n){const r=X(t);let s=r.Da[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Da[r.currentUser.toKey()]=s}}function no(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||kh(t,r)})}function kh(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(Eh(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),ca(t))}function Vl(t,e,n){for(const r of n)r instanceof bh?(t.ba.addReference(r.key,e),iy(t,r)):r instanceof Vh?(b("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||kh(t,r.key)):z()}function iy(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(b("SyncEngine","New document in limbo: "+n),t.ya.add(r),ca(t))}function ca(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new B(de.fromString(e)),r=t.va.next();t.Sa.set(r,new Xv(n)),t.wa=t.wa.insert(n,r),_h(t.remoteStore,new Ct(pt(zc(n.path)),r,"TargetPurposeLimboResolution",Ho._e))}}async function Pr(t,e,n){const r=X(t),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const c=ra.Ki(l.targetId,u);i.push(c)}}))}),await Promise.all(o),r.fa.u_(s),await async function(l,u){const c=X(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>E.forEach(u,d=>E.forEach(d.qi,f=>c.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>E.forEach(d.Qi,f=>c.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!br(h))throw h;b("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const f=c.ns.get(d),y=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(y);c.ns=c.ns.insert(d,p)}}}(r.localStore,i))}async function oy(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){b("SyncEngine","User change. New user:",e.toKey());const r=await gh(n.localStore,e);n.currentUser=e,function(i,o){i.Ca.forEach(a=>{a.forEach(l=>{l.reject(new N(w.CANCELLED,o))})}),i.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pr(n,r.us)}}function ay(t,e){const n=X(t),r=n.Sa.get(e);if(r&&r.ma)return J().add(r.key);{let s=J();const i=n.pa.get(e);if(!i)return s;for(const o of i){const a=n.ga.get(o);s=s.unionWith(a.view.la)}return s}}function ly(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ch.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ay.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ny.bind(null,e),e.fa.u_=Kv.bind(null,e.eventManager),e.fa.xa=Hv.bind(null,e.eventManager),e}function uy(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ry.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sy.bind(null,e),e}class Cl{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ei(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return mv(this.persistence,new dv,e.initialUser,this.serializer)}createPersistence(e){return new uv(na.Hr,this.serializer)}createSharedClientState(e){return new Tv}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bl(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oy.bind(null,this.syncEngine),await Uv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jv}()}createDatastore(e){const n=ei(e.databaseInfo.databaseId),r=function(i){return new Sv(i)}(e.databaseInfo);return function(i,o,a,l){return new Cv(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new Pv(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bl(this.syncEngine,n,0),function(){return Il.D()?new Il:new wv}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,c){const h=new Yv(s,i,o,a,l,u);return c&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=X(r);b("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await Rr(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ue.UNAUTHENTICATED,this.clientId=Nc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{b("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(b("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new N(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new It;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=la(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ii(t,e){t.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await gh(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rl(t,e){t.asyncQueue.verifyOperationInProgress();const n=await my(t);b("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Al(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Al(e.remoteStore,s)),t._onlineComponents=e}function fy(t){return t.name==="FirebaseError"?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function my(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){b("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ii(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!fy(n))throw n;Tn("Error using user provided cache. Falling back to memory cache: "+n),await Ii(t,new Cl)}}else b("FirestoreClient","Using default OfflineComponentProvider"),await Ii(t,new Cl);return t._offlineComponents}async function Dh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(b("FirestoreClient","Using user provided OnlineComponentProvider"),await Rl(t,t._uninitializedComponentsProvider._online)):(b("FirestoreClient","Using default OnlineComponentProvider"),await Rl(t,new cy))),t._onlineComponents}function gy(t){return Dh(t).then(e=>e.syncEngine)}async function py(t){const e=await Dh(t),n=e.eventManager;return n.onListen=Jv.bind(null,e.syncEngine),n.onUnlisten=ey.bind(null,e.syncEngine),n}function vy(t,e,n={}){const r=new It;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const c=new hy({next:d=>{o.enqueueAndForget(()=>zv(i,h)),d.fromCache&&l.source==="server"?u.reject(new N(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new Gv(a,c,{includeMetadataChanges:!0,Z_:!0});return qv(i,h)}(await py(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t,e,n){if(!n)throw new N(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yy(t,e,n,r){if(e===!0&&r===!0)throw new N(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kl(t){if(!B.isDocumentKey(t))throw new N(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dl(t){if(B.isDocumentKey(t))throw new N(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ha(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function Es(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new N(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ha(t);throw new N(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new N(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new N(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xh((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new N(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new N(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new N(w.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ri{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new N(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new N(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xl(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dg;switch(r.type){case"firstParty":return new Mg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new N(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Pl.get(n);r&&(b("ComponentProvider","Removing Datastore"),Pl.delete(n),r.terminate())}(this),Promise.resolve()}}function _y(t,e,n,r={}){var s;const i=(t=Es(t,ri))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Tn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ue.MOCK_USER;else{a=hf(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new N(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ue(u)}t._authCredentials=new xg(new xc(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new si(this.firestore,e,this._query)}}class ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}}class kt extends si{constructor(e,n,r){super(e,n,zc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new B(e))}withConverter(e){return new kt(this.firestore,e,this._path)}}function Oh(t,e,...n){if(t=Yn(t),Nh("collection","path",e),t instanceof ri){const r=de.fromString(e,...n);return Dl(r),new kt(t,null,r)}{if(!(t instanceof ct||t instanceof kt))throw new N(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return Dl(r),new kt(t.firestore,null,r)}}function Ey(t,e,...n){if(t=Yn(t),arguments.length===1&&(e=Nc.newId()),Nh("doc","path",e),t instanceof ri){const r=de.fromString(e,...n);return kl(r),new ct(t,null,new B(r))}{if(!(t instanceof ct||t instanceof kt))throw new N(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return kl(r),new ct(t.firestore,t instanceof kt?t.converter:null,new B(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new vh(this,"async_queue_retry"),this._u=()=>{const n=wi();n&&b("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=wi();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=wi();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new It;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!br(e))throw e;b("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const s=aa.createAndSchedule(this,e,n,r,i=>this.lu(i));return this.nu.push(s),s}au(){this.ru&&z()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}class da extends ri{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new Ty}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Fh(this),this._firestoreClient.terminate()}}function wy(t,e){const n=typeof t=="object"?t:pm(),r=typeof t=="string"?t:e||"(default)",s=dm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=uf("firestore");i&&_y(s,...i)}return s}function Mh(t){return t._firestoreClient||Fh(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Fh(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,c){return new Xg(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,xh(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new dy(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Ke.fromBase64String(e))}catch(n){throw new N(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vn(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new N(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new N(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new N(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=/^__.*__$/;class Ay{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new nn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vr(e,this.data,n,this.fieldTransforms)}}function Bh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}class ga{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new ga(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Au({path:r,Vu:!1});return s.mu(e),s}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Ts(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(Bh(this.du)&&Iy.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Sy{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ei(e)}Su(e,n,r,s=!1){return new ga({du:e,methodName:n,wu:r,path:Oe.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function by(t){const e=t._freezeSettings(),n=ei(t._databaseId);return new Sy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vy(t,e,n,r,s,i={}){const o=t.Su(i.merge||i.mergeFields?2:0,e,n,s);qh("Data must be an object, but it was:",o,r);const a=$h(r,o);let l,u;if(i.merge)l=new ut(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const d=Cy(e,h,n);if(!o.contains(d))throw new N(w.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Py(c,d)||c.push(d)}l=new ut(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new Ay(new rt(a),l,u)}function Uh(t,e){if(jh(t=Yn(t)))return qh("Unsupported field value:",e,t),$h(t,e);if(t instanceof Lh)return function(r,s){if(!Bh(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Uh(a,s.gu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Yn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yp(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ce.fromDate(r);return{timestampValue:ys(s.serializer,i)}}if(r instanceof Ce){const i=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ys(s.serializer,i)}}if(r instanceof ma)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vn)return{bytesValue:lh(s.serializer,r._byteString)};if(r instanceof ct){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ea(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${ha(r)}`)}(t,e)}function $h(t,e){const n={};return Oc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xn(t,(r,s)=>{const i=Uh(s,e.Ru(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function jh(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof ma||t instanceof Vn||t instanceof ct||t instanceof Lh)}function qh(t,e,n){if(!jh(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ha(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function Cy(t,e,n){if((e=Yn(e))instanceof fa)return e._internalPath;if(typeof e=="string")return zh(t,e);throw Ts("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ry=new RegExp("[~\\*/\\[\\]]");function zh(t,e,n){if(e.search(Ry)>=0)throw Ts(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fa(...e.split("."))._internalPath}catch{throw Ts(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ts(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new N(w.INVALID_ARGUMENT,a+t+l)}function Py(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ky(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ky extends Kh{data(){return super.data()}}function Hh(t,e){return typeof e=="string"?zh(t,e):e instanceof fa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new N(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xy{convertValue(e,n="none"){switch(en(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xn(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new ma(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wo(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ur(e));default:return null}}convertTimestamp(e){const n=Nt(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=de.fromString(e);ce(mh(r));const s=new cr(r.get(1),r.get(3)),i=new B(r.popFirst(5));return s.isEqual(n)||yt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oy extends Kh{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Qr extends Oy{data(e={}){return super.data(e)}}class My{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new qr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qr(this._firestore,this._userDataWriter,r.key,r,new qr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new N(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Qr(s._firestore,s._userDataWriter,a.doc.key,a.doc,new qr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Qr(s._firestore,s._userDataWriter,a.doc.key,a.doc,new qr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Fy(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Fy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}class Ly extends xy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}function By(t){t=Es(t,si);const e=Es(t.firestore,da),n=Mh(e),r=new Ly(e);return Dy(t._query),vy(n,t._query).then(s=>new My(e,r,t,s))}function Uy(t,e){const n=Es(t.firestore,da),r=Ey(t),s=Ny(t.converter,e);return $y(n,[Vy(by(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,At.exists(!1))]).then(()=>r)}function $y(t,e){return function(r,s){const i=new It;return r.asyncQueue.enqueueAndForget(async()=>ty(await gy(r),s,i)),i.promise}(Mh(t),e)}(function(e,n=!0){(function(s){Dn=s})(gm),os(new Jn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new da(new Ng(r.getProvider("auth-internal")),new Lg(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new N(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cr(u.options.projectId,c)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),fn(el,"4.4.2",e),fn(el,"4.4.2","esm2017")})();var jy="firebase",qy="10.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn(jy,qy,"app");const zy={apiKey:"AIzaSyBOmGpZ38BrTlcUT83o7p3MR8utO3dh2As",authDomain:"sport-database-552b0.firebaseapp.com",projectId:"sport-database-552b0",storageBucket:"sport-database-552b0.appspot.com",messagingSenderId:"407838315524",appId:"1:407838315524:web:7f7a6833698c144df25151"};Vu(zy);const Gh=wy();const Wh=Symbol.for("vuetify:selection-control-group"),Qh=ae({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Qt,trueIcon:Qt,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:Gl},...dt(),...oo(),...mr()},"SelectionControlGroup"),Ky=ae({...Qh({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");ke()({name:"VSelectionControlGroup",props:Ky(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Ye(t,"modelValue"),s=As(),i=S(()=>t.id||`v-selection-control-group-${s}`),o=S(()=>t.name||i.value),a=new Set;return Ss(Wh,{modelValue:r,forceUpdate:()=>{a.forEach(l=>l())},onForceUpdate:l=>{a.add(l),it(()=>{a.delete(l)})}}),Wl({[t.defaultsTarget]:{color:le(t,"color"),disabled:le(t,"disabled"),density:le(t,"density"),error:le(t,"error"),inline:le(t,"inline"),modelValue:r,multiple:S(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),name:o,falseIcon:le(t,"falseIcon"),trueIcon:le(t,"trueIcon"),readonly:le(t,"readonly"),ripple:le(t,"ripple"),type:le(t,"type"),valueComparator:le(t,"valueComparator")}}),He(()=>{var l;return m("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":t.inline},t.class],style:t.style,role:t.type==="radio"?"radiogroup":void 0},[(l=n.default)==null?void 0:l.call(n)])}),{}}});const Xh=ae({label:String,trueValue:null,falseValue:null,value:null,...dt(),...Qh()},"VSelectionControl");function Hy(t){const e=Cn(Wh,void 0),{densityClasses:n}=lo(t),r=Ye(t,"modelValue"),s=S(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),i=S(()=>t.falseValue!==void 0?t.falseValue:!1),o=S(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),a=S({get(){const f=e?e.modelValue.value:r.value;return o.value?f.some(y=>t.valueComparator(y,s.value)):t.valueComparator(f,s.value)},set(f){if(t.readonly)return;const y=f?s.value:i.value;let p=y;o.value&&(p=f?[...yn(r.value),y]:yn(r.value).filter(g=>!t.valueComparator(g,s.value))),e?e.modelValue.value=p:r.value=p}}),{textColorClasses:l,textColorStyles:u}=uo(S(()=>a.value&&!t.error&&!t.disabled?t.color:void 0)),{backgroundColorClasses:c,backgroundColorStyles:h}=Yr(S(()=>a.value&&!t.error&&!t.disabled?t.color:void 0)),d=S(()=>a.value?t.trueIcon:t.falseIcon);return{group:e,densityClasses:n,trueValue:s,falseValue:i,model:a,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:h,icon:d}}const Nl=ke()({name:"VSelectionControl",directives:{Ripple:ao},inheritAttrs:!1,props:Xh(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{group:s,densityClasses:i,icon:o,model:a,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:h,trueValue:d}=Hy(t),f=As(),y=S(()=>t.id||`input-${f}`),p=Se(!1),g=Se(!1),T=j();s==null||s.onForceUpdate(()=>{T.value&&(T.value.checked=a.value)});function A(M){p.value=!0,Jr(M.target,":focus-visible")!==!1&&(g.value=!0)}function v(){p.value=!1,g.value=!1}function O(M){t.readonly&&s&&Dt(()=>s.forceUpdate()),a.value=M.target.checked}return He(()=>{var k,U;const M=r.label?r.label({label:t.label,props:{for:y.value}}):t.label,[C,R]=Ql(n),x=m("input",ue({ref:T,checked:a.value,disabled:!!(t.readonly||t.disabled),id:y.value,onBlur:v,onFocus:A,onInput:O,"aria-disabled":!!(t.readonly||t.disabled),type:t.type,value:d.value,name:t.name,"aria-checked":t.type==="checkbox"?a.value:void 0},R),null);return m("div",ue({class:["v-selection-control",{"v-selection-control--dirty":a.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":p.value,"v-selection-control--focus-visible":g.value,"v-selection-control--inline":t.inline},i.value,t.class]},C,{style:t.style}),[m("div",{class:["v-selection-control__wrapper",l.value],style:u.value},[(k=r.default)==null?void 0:k.call(r,{backgroundColorClasses:c,backgroundColorStyles:h}),vn(m("div",{class:["v-selection-control__input"]},[((U=r.input)==null?void 0:U.call(r,{model:a,textColorClasses:l,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:h,inputNode:x,icon:o.value,props:{onFocus:A,onBlur:v,id:y.value}}))??m(je,null,[o.value&&m(st,{key:"icon",icon:o.value},null),x])]),[[bs("ripple"),t.ripple&&[!t.disabled&&!t.readonly,null,["center","circle"]]]])]),M&&m(Xl,{for:y.value,clickable:!0,onClick:F=>F.stopPropagation()},{default:()=>[M]})])}),{isFocused:p,input:T}}}),Yh=ae({indeterminate:Boolean,indeterminateIcon:{type:Qt,default:"$checkboxIndeterminate"},...Xh({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),ws=ke()({name:"VCheckboxBtn",props:Yh(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{slots:n}=e;const r=Ye(t,"indeterminate"),s=Ye(t,"modelValue");function i(l){r.value&&(r.value=!1)}const o=S(()=>r.value?t.indeterminateIcon:t.falseIcon),a=S(()=>r.value?t.indeterminateIcon:t.trueIcon);return He(()=>{const l=gr(Nl.filterProps(t)[0],["modelValue"]);return m(Nl,ue(l,{modelValue:s.value,"onUpdate:modelValue":[u=>s.value=u,i],class:["v-checkbox-btn",t.class],style:t.style,type:"checkbox",falseIcon:o.value,trueIcon:a.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}}),Gy=ae({...Yl(),...gr(Yh(),["inline"])},"VCheckbox"),Tt=ke()({name:"VCheckbox",inheritAttrs:!1,props:Gy(),emits:{"update:modelValue":t=>!0,"update:focused":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const s=Ye(t,"modelValue"),{isFocused:i,focus:o,blur:a}=Jl(t),l=As(),u=S(()=>t.id||`checkbox-${l}`);return He(()=>{const[c,h]=Ql(n),[d,f]=Zr.filterProps(t),[y,p]=ws.filterProps(t);return m(Zr,ue({class:["v-checkbox",t.class]},c,d,{modelValue:s.value,"onUpdate:modelValue":g=>s.value=g,id:u.value,focused:i.value,style:t.style}),{...r,default:g=>{let{id:T,messagesId:A,isDisabled:v,isReadonly:O}=g;return m(ws,ue(y,{id:T.value,"aria-describedby":A.value,disabled:v.value,readonly:O.value},h,{modelValue:s.value,"onUpdate:modelValue":M=>s.value=M,onFocus:o,onBlur:a}),r)}})}),{}}});const Jh=Symbol.for("vuetify:v-chip-group"),Wy=ae({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Gl},...dt(),...hd({selectedClass:"v-chip--selected"}),...co(),...mr(),...Zl({variant:"tonal"})},"VChipGroup");ke()({name:"VChipGroup",props:Wy(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=Vs(t),{isSelected:s,select:i,next:o,prev:a,selected:l}=dd(t,Jh);return Wl({VChip:{color:le(t,"color"),disabled:le(t,"disabled"),filter:le(t,"filter"),variant:le(t,"variant")}}),He(()=>m(t.tag,{class:["v-chip-group",{"v-chip-group--column":t.column},r.value,t.class],style:t.style},{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:s,select:i,next:o,prev:a,selected:l.value})]}})),{}}});const Qy=ae({activeClass:String,appendAvatar:String,appendIcon:Qt,closable:Boolean,closeIcon:{type:Qt,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Qt,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:Ea(),onClickOnce:Ea(),...fd(),...dt(),...oo(),...eu(),...md(),...tu(),...gd(),...pd(),...co({tag:"span"}),...mr(),...Zl({variant:"tonal"})},"VChip"),Zh=ke()({name:"VChip",directives:{Ripple:ao},props:Qy(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,e){let{attrs:n,emit:r,slots:s}=e;const{t:i}=ho(),{borderClasses:o}=vd(t),{colorClasses:a,colorStyles:l,variantClasses:u}=yd(t),{densityClasses:c}=lo(t),{elevationClasses:h}=nu(t),{roundedClasses:d}=ru(t),{sizeClasses:f}=_d(t),{themeClasses:y}=Vs(t),p=Ye(t,"modelValue"),g=Ed(t,Jh,!1),T=Td(t,n),A=S(()=>t.link!==!1&&T.isLink.value),v=S(()=>!t.disabled&&t.link!==!1&&(!!g||t.link||T.isClickable.value)),O=S(()=>({"aria-label":i(t.closeLabel),onClick(R){R.stopPropagation(),p.value=!1,r("click:close",R)}}));function M(R){var x;r("click",R),v.value&&((x=T.navigate)==null||x.call(T,R),g==null||g.toggle())}function C(R){(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),M(R))}return()=>{const R=T.isLink.value?"a":t.tag,x=!!(t.appendIcon||t.appendAvatar),k=!!(x||s.append),U=!!(s.close||t.closable),F=!!(s.filter||t.filter)&&g,D=!!(t.prependIcon||t.prependAvatar),I=!!(D||s.prepend),Q=!g||g.isSelected.value;return p.value&&vn(m(R,{class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":v.value,"v-chip--filter":F,"v-chip--pill":t.pill},y.value,o.value,Q?a.value:void 0,c.value,h.value,d.value,f.value,u.value,g==null?void 0:g.selectedClass.value,t.class],style:[Q?l.value:void 0,t.style],disabled:t.disabled||void 0,draggable:t.draggable,href:T.href.value,tabindex:v.value?0:void 0,onClick:M,onKeydown:v.value&&!A.value&&C},{default:()=>{var re;return[wd(v.value,"v-chip"),F&&m(Id,{key:"filter"},{default:()=>[vn(m("div",{class:"v-chip__filter"},[s.filter?m(jt,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},s.filter):m(st,{key:"filter-icon",icon:t.filterIcon},null)]),[[fo,g.isSelected.value]])]}),I&&m("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?m(jt,{key:"prepend-defaults",disabled:!D,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},s.prepend):m(je,null,[t.prependIcon&&m(st,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&m(Ta,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),m("div",{class:"v-chip__content"},[((re=s.default)==null?void 0:re.call(s,{isSelected:g==null?void 0:g.isSelected.value,selectedClass:g==null?void 0:g.selectedClass.value,select:g==null?void 0:g.select,toggle:g==null?void 0:g.toggle,value:g==null?void 0:g.value.value,disabled:t.disabled}))??t.text]),k&&m("div",{key:"append",class:"v-chip__append"},[s.append?m(jt,{key:"append-defaults",disabled:!x,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},s.append):m(je,null,[t.appendIcon&&m(st,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&m(Ta,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),U&&m("div",ue({key:"close",class:"v-chip__close"},O.value),[s.close?m(jt,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},s.close):m(st,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}}),[[bs("ripple"),v.value&&t.ripple,null]])}}});function Ai(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Xy(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ol(t,e){if(t.side==="top"||t.side==="bottom"){const{side:n,align:r}=t,s=r==="left"?0:r==="center"?e.width/2:r==="right"?e.width:r,i=n==="top"?0:n==="bottom"?e.height:n;return Ai({x:s,y:i},e)}else if(t.side==="left"||t.side==="right"){const{side:n,align:r}=t,s=n==="left"?0:n==="right"?e.width:n,i=r==="top"?0:r==="center"?e.height/2:r==="bottom"?e.height:r;return Ai({x:s,y:i},e)}return Ai({x:e.width/2,y:e.height/2},e)}const ed={static:Zy,connected:t_},Yy=ae({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in ed},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function Jy(t,e){const n=j({}),r=j();Vt&&(Cs(()=>!!(e.isActive.value&&t.locationStrategy),i=>{var o,a;Ee(()=>t.locationStrategy,i),it(()=>{r.value=void 0}),typeof t.locationStrategy=="function"?r.value=(o=t.locationStrategy(e,t,n))==null?void 0:o.updateLocation:r.value=(a=ed[t.locationStrategy](e,t,n))==null?void 0:a.updateLocation}),window.addEventListener("resize",s,{passive:!0}),it(()=>{window.removeEventListener("resize",s),r.value=void 0}));function s(i){var o;(o=r.value)==null||o.call(r,i)}return{contentStyles:n,updateLocation:r}}function Zy(){}function e_(t,e){e?t.style.removeProperty("left"):t.style.removeProperty("right");const n=Hl(t);return e?n.x+=parseFloat(t.style.right||0):n.x-=parseFloat(t.style.left||0),n.y-=parseFloat(t.style.top||0),n}function t_(t,e,n){Yd(t.activatorEl.value)&&Object.assign(n.value,{position:"fixed",top:0,[t.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:i}=Ad(()=>{const y=wa(e.location,t.isRtl.value),p=e.origin==="overlap"?y:e.origin==="auto"?ii(y):wa(e.origin,t.isRtl.value);return y.side===p.side&&y.align===oi(p).align?{preferredAnchor:Ia(y),preferredOrigin:Ia(p)}:{preferredAnchor:y,preferredOrigin:p}}),[o,a,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(y=>S(()=>{const p=parseFloat(e[y]);return isNaN(p)?1/0:p})),c=S(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const y=e.offset.split(" ").map(parseFloat);return y.length<2&&y.push(0),y}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let h=!1;const d=new ResizeObserver(()=>{h&&f()});Ee([t.activatorEl,t.contentEl],(y,p)=>{let[g,T]=y,[A,v]=p;A&&d.unobserve(A),g&&d.observe(g),v&&d.unobserve(v),T&&d.observe(T)},{immediate:!0}),it(()=>{d.disconnect()});function f(){if(h=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>h=!0)}),!t.activatorEl.value||!t.contentEl.value)return;const y=t.activatorEl.value.getBoundingClientRect(),p=e_(t.contentEl.value,t.isRtl.value),g=ns(t.contentEl.value),T=12;g.length||(g.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(p.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),p.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const A=g.reduce((F,D)=>{const I=D.getBoundingClientRect(),Q=new ai({x:D===document.documentElement?0:I.x,y:D===document.documentElement?0:I.y,width:D.clientWidth,height:D.clientHeight});return F?new ai({x:Math.max(F.left,Q.left),y:Math.max(F.top,Q.top),width:Math.min(F.right,Q.right)-Math.max(F.left,Q.left),height:Math.min(F.bottom,Q.bottom)-Math.max(F.top,Q.top)}):Q},void 0);A.x+=T,A.y+=T,A.width-=T*2,A.height-=T*2;let v={anchor:s.value,origin:i.value};function O(F){const D=new ai(p),I=Ol(F.anchor,y),Q=Ol(F.origin,D);let{x:re,y:_}=Xy(I,Q);switch(F.anchor.side){case"top":_-=c.value[0];break;case"bottom":_+=c.value[0];break;case"left":re-=c.value[0];break;case"right":re+=c.value[0];break}switch(F.anchor.align){case"top":_-=c.value[1];break;case"bottom":_+=c.value[1];break;case"left":re-=c.value[1];break;case"right":re+=c.value[1];break}return D.x+=re,D.y+=_,D.width=Math.min(D.width,l.value),D.height=Math.min(D.height,u.value),{overflows:Sa(D,A),x:re,y:_}}let M=0,C=0;const R={x:0,y:0},x={x:!1,y:!1};let k=-1;for(;!(k++>10);){const{x:F,y:D,overflows:I}=O(v);M+=F,C+=D,p.x+=F,p.y+=D;{const Q=Aa(v.anchor),re=I.x.before||I.x.after,_=I.y.before||I.y.after;let Y=!1;if(["x","y"].forEach($=>{if($==="x"&&re&&!x.x||$==="y"&&_&&!x.y){const q={anchor:{...v.anchor},origin:{...v.origin}},oe=$==="x"?Q==="y"?oi:ii:Q==="y"?ii:oi;q.anchor=oe(q.anchor),q.origin=oe(q.origin);const{overflows:G}=O(q);(G[$].before<=I[$].before&&G[$].after<=I[$].after||G[$].before+G[$].after<(I[$].before+I[$].after)/2)&&(v=q,Y=x[$]=!0)}}),Y)continue}I.x.before&&(M+=I.x.before,p.x+=I.x.before),I.x.after&&(M-=I.x.after,p.x-=I.x.after),I.y.before&&(C+=I.y.before,p.y+=I.y.before),I.y.after&&(C-=I.y.after,p.y-=I.y.after);{const Q=Sa(p,A);R.x=A.width-Q.x.before-Q.x.after,R.y=A.height-Q.y.before-Q.y.after,M+=Q.x.before,p.x+=Q.x.before,C+=Q.y.before,p.y+=Q.y.before}break}const U=Aa(v.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${v.anchor.side} ${v.anchor.align}`,transformOrigin:`${v.origin.side} ${v.origin.align}`,top:ye(Si(C)),left:t.isRtl.value?void 0:ye(Si(M)),right:t.isRtl.value?ye(Si(-M)):void 0,minWidth:ye(U==="y"?Math.min(o.value,y.width):o.value),maxWidth:ye(Ml(_n(R.x,o.value===1/0?0:o.value,l.value))),maxHeight:ye(Ml(_n(R.y,a.value===1/0?0:a.value,u.value)))}),{available:R,contentBox:p}}return Ee(()=>[s.value,i.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>f()),Dt(()=>{const y=f();if(!y)return;const{available:p,contentBox:g}=y;g.height>p.y&&requestAnimationFrame(()=>{f(),requestAnimationFrame(()=>{f()})})}),{updateLocation:f}}function Si(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function Ml(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let ro=!0;const Is=[];function n_(t){!ro||Is.length?(Is.push(t),so()):(ro=!1,t(),so())}let Fl=-1;function so(){cancelAnimationFrame(Fl),Fl=requestAnimationFrame(()=>{const t=Is.shift();t&&t(),Is.length?so():ro=!0})}const Xr={none:null,close:i_,block:o_,reposition:a_},r_=ae({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in Xr}},"VOverlay-scroll-strategies");function s_(t,e){if(!Vt)return;let n;pr(async()=>{n==null||n.stop(),e.isActive.value&&t.scrollStrategy&&(n=su(),await Dt(),n.active&&n.run(()=>{var r;typeof t.scrollStrategy=="function"?t.scrollStrategy(e,t,n):(r=Xr[t.scrollStrategy])==null||r.call(Xr,e,t,n)}))}),it(()=>{n==null||n.stop()})}function i_(t){function e(n){t.isActive.value=!1}td(t.activatorEl.value??t.contentEl.value,e)}function o_(t,e){var o;const n=(o=t.root.value)==null?void 0:o.offsetParent,r=[...new Set([...ns(t.activatorEl.value,e.contained?n:void 0),...ns(t.contentEl.value,e.contained?n:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,i=(a=>yo(a)&&a)(n||document.documentElement);i&&t.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((a,l)=>{a.style.setProperty("--v-body-scroll-x",ye(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",ye(-a.scrollTop)),a!==document.documentElement&&a.style.setProperty("--v-scrollbar-offset",ye(s)),a.classList.add("v-overlay-scroll-blocked")}),it(()=>{r.forEach((a,l)=>{const u=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),c=parseFloat(a.style.getPropertyValue("--v-body-scroll-y"));a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-u,a.scrollTop=-c}),i&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function a_(t,e,n){let r=!1,s=-1,i=-1;function o(a){n_(()=>{var c,h;const l=performance.now();(h=(c=t.updateLocation).value)==null||h.call(c,a),r=(performance.now()-l)/(1e3/60)>2})}i=(typeof requestIdleCallback>"u"?a=>a():requestIdleCallback)(()=>{n.run(()=>{td(t.activatorEl.value??t.contentEl.value,a=>{r?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{o(a)})})):o(a)})})}),it(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(i),cancelAnimationFrame(s)})}function td(t,e){const n=[document,...ns(t)];n.forEach(r=>{r.addEventListener("scroll",e,{passive:!0})}),it(()=>{n.forEach(r=>{r.removeEventListener("scroll",e)})})}const io=Symbol.for("vuetify:v-menu"),l_=ae({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function u_(t,e){const n={},r=s=>()=>{if(!Vt)return Promise.resolve(!0);const i=s==="openDelay";return n.closeDelay&&window.clearTimeout(n.closeDelay),delete n.closeDelay,n.openDelay&&window.clearTimeout(n.openDelay),delete n.openDelay,new Promise(o=>{const a=parseInt(t[s]??0,10);n[s]=window.setTimeout(()=>{e==null||e(i),o(i)},a)})};return{runCloseDelay:r("closeDelay"),runOpenDelay:r("openDelay")}}const c_=ae({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...l_()},"VOverlay-activator");function h_(t,e){let{isActive:n,isTop:r}=e;const s=j();let i=!1,o=!1,a=!0;const l=S(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),u=S(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!l.value),{runOpenDelay:c,runCloseDelay:h}=u_(t,v=>{v===(t.openOnHover&&i||l.value&&o)&&!(t.openOnHover&&n.value&&!r.value)&&(n.value!==v&&(a=!0),n.value=v)}),d={onClick:v=>{v.stopPropagation(),s.value=v.currentTarget||v.target,n.value=!n.value},onMouseenter:v=>{var O;(O=v.sourceCapabilities)!=null&&O.firesTouchEvents||(i=!0,s.value=v.currentTarget||v.target,c())},onMouseleave:v=>{i=!1,h()},onFocus:v=>{Jr(v.target,":focus-visible")!==!1&&(o=!0,v.stopPropagation(),s.value=v.currentTarget||v.target,c())},onBlur:v=>{o=!1,v.stopPropagation(),h()}},f=S(()=>{const v={};return u.value&&(v.onClick=d.onClick),t.openOnHover&&(v.onMouseenter=d.onMouseenter,v.onMouseleave=d.onMouseleave),l.value&&(v.onFocus=d.onFocus,v.onBlur=d.onBlur),v}),y=S(()=>{const v={};if(t.openOnHover&&(v.onMouseenter=()=>{i=!0,c()},v.onMouseleave=()=>{i=!1,h()}),l.value&&(v.onFocusin=()=>{o=!0,c()},v.onFocusout=()=>{o=!1,h()}),t.closeOnContentClick){const O=Cn(io,null);v.onClick=()=>{n.value=!1,O==null||O.closeParents()}}return v}),p=S(()=>{const v={};return t.openOnHover&&(v.onMouseenter=()=>{a&&(i=!0,a=!1,c())},v.onMouseleave=()=>{i=!1,h()}),v});Ee(r,v=>{v&&(t.openOnHover&&!i&&(!l.value||!o)||l.value&&!o&&(!t.openOnHover||!i))&&(n.value=!1)});const g=j();pr(()=>{g.value&&Dt(()=>{s.value=Sd(g.value)})});const T=mo("useActivator");let A;return Ee(()=>!!t.activator,v=>{v&&Vt?(A=su(),A.run(()=>{d_(t,T,{activatorEl:s,activatorEvents:f})})):A&&A.stop()},{flush:"post",immediate:!0}),it(()=>{A==null||A.stop()}),{activatorEl:s,activatorRef:g,activatorEvents:f,contentEvents:y,scrimEvents:p}}function d_(t,e,n){let{activatorEl:r,activatorEvents:s}=n;Ee(()=>t.activator,(l,u)=>{if(u&&l!==u){const c=a(u);c&&o(c)}l&&Dt(()=>i())},{immediate:!0}),Ee(()=>t.activatorProps,()=>{i()}),it(()=>{o()});function i(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;l&&Wd(l,ue(s.value,u))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;l&&Qd(l,ue(s.value,u))}function a(){var c,h;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator,u;if(l)if(l==="parent"){let d=(h=(c=e==null?void 0:e.proxy)==null?void 0:c.$el)==null?void 0:h.parentNode;for(;d!=null&&d.hasAttribute("data-no-activator");)d=d.parentNode;u=d}else typeof l=="string"?u=document.querySelector(l):"$el"in l?u=l.$el:u=l;return r.value=(u==null?void 0:u.nodeType)===Node.ELEMENT_NODE?u:null,r.value}}function f_(){if(!Vt)return Se(!1);const{ssr:t}=iu();if(t){const e=Se(!1);return go(()=>{e.value=!0}),e}else return Se(!0)}const m_=ae({eager:Boolean},"lazy");function g_(t,e){const n=Se(!1),r=S(()=>n.value||t.eager||e.value);Ee(e,()=>n.value=!0);function s(){t.eager||(n.value=!1)}return{isBooted:n,hasContent:r,onAfterLeave:s}}const Ll=Symbol.for("vuetify:stack"),Bn=ou([]);function p_(t,e,n){const r=mo("useStack"),s=!n,i=Cn(Ll,void 0),o=ou({activeChildren:new Set});Ss(Ll,o);const a=Se(+e.value);Cs(t,()=>{var h;const c=(h=Bn.at(-1))==null?void 0:h[1];a.value=c?c+10:+e.value,s&&Bn.push([r.uid,a.value]),i==null||i.activeChildren.add(r.uid),it(()=>{if(s){const d=bd(Bn).findIndex(f=>f[0]===r.uid);Bn.splice(d,1)}i==null||i.activeChildren.delete(r.uid)})});const l=Se(!0);s&&pr(()=>{var h;const c=((h=Bn.at(-1))==null?void 0:h[0])===r.uid;setTimeout(()=>l.value=c)});const u=S(()=>!o.activeChildren.size);return{globalTop:Vd(l),localTop:u,stackStyles:S(()=>({zIndex:a.value}))}}function v_(t){return{teleportTarget:S(()=>{const n=t.value;if(n===!0||!Vt)return;const r=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(r==null)return;let s=r.querySelector(":scope > .v-overlay-container");return s||(s=document.createElement("div"),s.className="v-overlay-container",r.appendChild(s)),s})}}function y_(){return!0}function nd(t,e,n){if(!t||rd(t,n)===!1)return!1;const r=pu(e);if(typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&r.host===t.target)return!1;const s=(typeof n.value=="object"&&n.value.include||(()=>[]))();return s.push(e),!s.some(i=>i==null?void 0:i.contains(t.target))}function rd(t,e){return(typeof e.value=="object"&&e.value.closeConditional||y_)(t)}function __(t,e,n){const r=typeof n.value=="function"?n.value:n.value.handler;e._clickOutside.lastMousedownWasOutside&&nd(t,e,n)&&setTimeout(()=>{rd(t,n)&&r&&r(t)},0)}function Bl(t,e){const n=pu(t);e(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&e(n)}const E_={mounted(t,e){const n=s=>__(s,t,e),r=s=>{t._clickOutside.lastMousedownWasOutside=nd(s,t,e)};Bl(t,s=>{s.addEventListener("click",n,!0),s.addEventListener("mousedown",r,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[e.instance.$.uid]={onClick:n,onMousedown:r}},unmounted(t,e){t._clickOutside&&(Bl(t,n=>{var i;if(!n||!((i=t._clickOutside)!=null&&i[e.instance.$.uid]))return;const{onClick:r,onMousedown:s}=t._clickOutside[e.instance.$.uid];n.removeEventListener("click",r,!0),n.removeEventListener("mousedown",s,!0)}),delete t._clickOutside[e.instance.$.uid])}};function T_(t){const{modelValue:e,color:n,...r}=t;return m(bi,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&m("div",ue({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},r),null)]})}const sd=ae({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...c_(),...dt(),...au(),...m_(),...Yy(),...r_(),...mr(),...po()},"VOverlay"),Ul=ke()({name:"VOverlay",directives:{ClickOutside:E_},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...sd()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,afterLeave:()=>!0},setup(t,e){let{slots:n,attrs:r,emit:s}=e;const i=Ye(t,"modelValue"),o=S({get:()=>i.value,set:q=>{q&&t.disabled||(i.value=q)}}),{teleportTarget:a}=v_(S(()=>t.attach||t.contained)),{themeClasses:l}=Vs(t),{rtlClasses:u,isRtl:c}=Rs(),{hasContent:h,onAfterLeave:d}=g_(t,o),f=Yr(S(()=>typeof t.scrim=="string"?t.scrim:null)),{globalTop:y,localTop:p,stackStyles:g}=p_(o,le(t,"zIndex"),t._disableGlobalStack),{activatorEl:T,activatorRef:A,activatorEvents:v,contentEvents:O,scrimEvents:M}=h_(t,{isActive:o,isTop:p}),{dimensionStyles:C}=lu(t),R=f_(),{scopeId:x}=uu();Ee(()=>t.disabled,q=>{q&&(o.value=!1)});const k=j(),U=j(),{contentStyles:F,updateLocation:D}=Jy(t,{isRtl:c,contentEl:U,activatorEl:T,isActive:o});s_(t,{root:k,contentEl:U,activatorEl:T,isActive:o,updateLocation:D});function I(q){s("click:outside",q),t.persistent?$():o.value=!1}function Q(){return o.value&&y.value}Vt&&Ee(o,q=>{q?window.addEventListener("keydown",re):window.removeEventListener("keydown",re)},{immediate:!0});function re(q){var oe,G;q.key==="Escape"&&y.value&&(t.persistent?$():(o.value=!1,(oe=U.value)!=null&&oe.contains(document.activeElement)&&((G=T.value)==null||G.focus())))}const _=Cd();Cs(()=>t.closeOnBack,()=>{kd(_,q=>{y.value&&o.value?(q(!1),t.persistent?$():o.value=!1):q()})});const Y=j();Ee(()=>o.value&&(t.absolute||t.contained)&&a.value==null,q=>{if(q){const oe=vu(k.value);oe&&oe!==document.scrollingElement&&(Y.value=oe.scrollTop)}});function $(){t.noClickAnimation||U.value&&Un(U.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Vi})}return He(()=>{var q;return m(je,null,[(q=n.activator)==null?void 0:q.call(n,{isActive:o.value,props:ue({ref:A},v.value,t.activatorProps)}),R.value&&h.value&&m(Rd,{disabled:!a.value,to:a.value},{default:()=>[m("div",ue({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":o.value,"v-overlay--contained":t.contained},l.value,u.value,t.class],style:[g.value,{top:ye(Y.value)},t.style],ref:k},x,r),[m(T_,ue({color:f,modelValue:o.value&&!!t.scrim},M.value),null),m(Pd,{appear:!0,persisted:!0,transition:t.transition,target:T.value,onAfterLeave:()=>{d(),s("afterLeave")}},{default:()=>{var oe;return[vn(m("div",ue({ref:U,class:["v-overlay__content",t.contentClass],style:[C.value,F.value]},O.value,t.contentProps),[(oe=n.default)==null?void 0:oe.call(n,{isActive:o})]),[[fo,o.value],[bs("click-outside"),{handler:I,closeConditional:Q,include:()=>[T.value]}]])]}})])]})])}),{activatorEl:T,animateClick:$,contentEl:U,globalTop:y,localTop:p,updateLocation:D}}}),w_=ae({id:String,...gr(sd({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:yu}}),["absolute"])},"VMenu"),pa=ke()({name:"VMenu",props:w_(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Ye(t,"modelValue"),{scopeId:s}=uu(),i=As(),o=S(()=>t.id||`v-menu-${i}`),a=j(),l=Cn(io,null),u=Se(0);Ss(io,{register(){++u.value},unregister(){--u.value},closeParents(){setTimeout(()=>{u.value||(r.value=!1,l==null||l.closeParents())},40)}});async function c(p){var A,v,O;const g=p.relatedTarget,T=p.target;await Dt(),r.value&&g!==T&&((A=a.value)!=null&&A.contentEl)&&((v=a.value)!=null&&v.globalTop)&&![document,a.value.contentEl].includes(T)&&!a.value.contentEl.contains(T)&&((O=ba(a.value.contentEl)[0])==null||O.focus())}Ee(r,p=>{p?(l==null||l.register(),document.addEventListener("focusin",c,{once:!0})):(l==null||l.unregister(),document.removeEventListener("focusin",c))});function h(){l==null||l.closeParents()}function d(p){var g,T,A;t.disabled||p.key==="Tab"&&(Dd(ba((g=a.value)==null?void 0:g.contentEl,!1),p.shiftKey?"prev":"next",O=>O.tabIndex>=0)||(r.value=!1,(A=(T=a.value)==null?void 0:T.activatorEl)==null||A.focus()))}function f(p){var T;if(t.disabled)return;const g=(T=a.value)==null?void 0:T.contentEl;g&&r.value?p.key==="ArrowDown"?(p.preventDefault(),Va(g,"next")):p.key==="ArrowUp"&&(p.preventDefault(),Va(g,"prev")):["ArrowDown","ArrowUp"].includes(p.key)&&(r.value=!0,p.preventDefault(),setTimeout(()=>setTimeout(()=>f(p))))}const y=S(()=>ue({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":o.value,onKeydown:f},t.activatorProps));return He(()=>{const[p]=Ul.filterProps(t);return m(Ul,ue({ref:a,class:["v-menu",t.class],style:t.style},p,{modelValue:r.value,"onUpdate:modelValue":g=>r.value=g,absolute:!0,activatorProps:y.value,"onClick:outside":h,onKeydown:d},s),{activator:n.activator,default:function(){for(var g=arguments.length,T=new Array(g),A=0;A<g;A++)T[A]=arguments[A];return m(jt,{root:"VMenu"},{default:()=>{var v;return[(v=n.default)==null?void 0:v.call(n,...T)]}})}})}),Ps({id:o,ΨopenChildren:u},a)}});const I_=ae({renderless:Boolean,...dt()},"VVirtualScrollItem"),A_=ke()({name:"VVirtualScrollItem",inheritAttrs:!1,props:I_(),emits:{"update:height":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:s}=e;const{resizeRef:i,contentRect:o}=cu(void 0,"border");Ee(()=>{var a;return(a=o.value)==null?void 0:a.height},a=>{a!=null&&r("update:height",a)}),He(()=>{var a,l;return t.renderless?m(je,null,[(a=s.default)==null?void 0:a.call(s,{itemRef:i})]):m("div",ue({ref:i,class:["v-virtual-scroll__item",t.class],style:t.style},n),[(l=s.default)==null?void 0:l.call(s)])})}}),$l=-1,jl=1,S_=ae({itemHeight:{type:[Number,String],default:48}},"virtual");function b_(t,e,n){const r=Se(0),s=Se(t.itemHeight),i=S({get:()=>parseInt(s.value??0,10),set(R){s.value=R}}),o=j(),{resizeRef:a,contentRect:l}=cu();pr(()=>{a.value=o.value});const u=iu(),c=new Map;let h=Array.from({length:e.value.length});const d=S(()=>{const R=(!l.value||o.value===document.documentElement?u.height.value:l.value.height)-((n==null?void 0:n.value)??0);return Math.ceil(R/i.value*1.7+1)});function f(R,x){i.value=Math.max(i.value,x),h[R]=x,c.set(e.value[R],x)}function y(R){return h.slice(0,R).reduce((x,k)=>x+(k||i.value),0)}function p(R){const x=e.value.length;let k=0,U=0;for(;U<R&&k<x;)U+=h[k++]||i.value;return k-1}let g=0;function T(){if(!o.value||!l.value)return;const R=l.value.height-56,x=o.value.scrollTop,k=x<g?$l:jl,U=p(x+R/2),F=Math.round(d.value/3),D=U-F,I=r.value+F*2-1;k===$l&&U<=I?r.value=_n(D,0,e.value.length):k===jl&&U>=I&&(r.value=_n(D,0,e.value.length-d.value)),g=x}function A(R){if(!o.value)return;const x=y(R);o.value.scrollTop=x}const v=S(()=>Math.min(e.value.length,r.value+d.value)),O=S(()=>e.value.slice(r.value,v.value).map((R,x)=>({raw:R,index:x+r.value}))),M=S(()=>y(r.value)),C=S(()=>y(e.value.length)-y(v.value));return Ee(()=>e.value.length,()=>{h=hu(e.value.length).map(()=>i.value),c.forEach((R,x)=>{const k=e.value.indexOf(x);k===-1?c.delete(x):h[k]=R})}),{containerRef:o,computedItems:O,itemHeight:i,paddingTop:M,paddingBottom:C,scrollToIndex:A,handleScroll:T,handleItemResize:f}}const V_=ae({items:{type:Array,default:()=>[]},renderless:Boolean,...S_(),...dt(),...au()},"VVirtualScroll"),id=ke()({name:"VVirtualScroll",props:V_(),setup(t,e){let{slots:n}=e;const r=mo("VVirtualScroll"),{dimensionStyles:s}=lu(t),{containerRef:i,handleScroll:o,handleItemResize:a,scrollToIndex:l,paddingTop:u,paddingBottom:c,computedItems:h}=b_(t,le(t,"items"));return Cs(()=>t.renderless,()=>{go(()=>{var d;i.value=vu(r.vnode.el,!0),(d=i.value)==null||d.addEventListener("scroll",o)}),it(()=>{var d;(d=i.value)==null||d.removeEventListener("scroll",o)})}),He(()=>{const d=h.value.map(f=>m(A_,{key:f.index,renderless:t.renderless,"onUpdate:height":y=>a(f.index,y)},{default:y=>{var p;return(p=n.default)==null?void 0:p.call(n,{item:f.raw,index:f.index,...y})}}));return t.renderless?m(je,null,[m("div",{class:"v-virtual-scroll__spacer",style:{paddingTop:ye(u.value)}},null),d,m("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ye(c.value)}},null)]):m("div",{ref:i,class:["v-virtual-scroll",t.class],onScroll:o,style:[s.value,t.style]},[m("div",{class:"v-virtual-scroll__container",style:{paddingTop:ye(u.value),paddingBottom:ye(c.value)}},[d])])}),{scrollToIndex:l}}});function od(t,e){const n=Se(!1);let r;function s(a){cancelAnimationFrame(r),n.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{n.value=!1})})}async function i(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(n.value){const l=Ee(n,()=>{l(),a()})}else a()})}async function o(a){var c,h;if(a.key==="Tab"&&((c=e.value)==null||c.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const l=(h=t.value)==null?void 0:h.$el;if(!l)return;(a.key==="Home"||a.key==="End")&&l.scrollTo({top:a.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await i();const u=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const d=l.getBoundingClientRect().top;for(const f of u)if(f.getBoundingClientRect().top>=d){f.focus();break}}else{const d=l.getBoundingClientRect().bottom;for(const f of[...u].reverse())if(f.getBoundingClientRect().bottom<=d){f.focus();break}}}return{onListScroll:s,onListKeydown:o}}const ad=ae({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Qt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...xd({itemChildren:!1})},"Select"),C_=ae({...ad(),...gr(du({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...po({transition:{component:yu}})},"VSelect");ke()({name:"VSelect",props:C_(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:n}=e;const{t:r}=ho(),s=j(),i=j(),o=j(),a=Ye(t,"menu"),l=S({get:()=>a.value,set:_=>{var Y;a.value&&!_&&((Y=i.value)!=null&&Y.ΨopenChildren)||(a.value=_)}}),{items:u,transformIn:c,transformOut:h}=fu(t),d=Ye(t,"modelValue",[],_=>c(_===null?[null]:yn(_)),_=>{const Y=h(_);return t.multiple?Y:Y[0]??null}),f=mu(),y=S(()=>d.value.map(_=>_.value)),p=Se(!1),g=S(()=>l.value?t.closeText:t.openText);let T="",A;const v=S(()=>t.hideSelected?u.value.filter(_=>!d.value.some(Y=>Y===_)):u.value),O=S(()=>t.hideNoData&&!u.value.length||t.readonly||(f==null?void 0:f.isReadonly.value)),M=j(),{onListScroll:C,onListKeydown:R}=od(M,s);function x(_){t.openOnClear&&(l.value=!0)}function k(){O.value||(l.value=!l.value)}function U(_){var G,Te;if(!_.key||t.readonly||f!=null&&f.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(_.key)&&_.preventDefault(),["Enter","ArrowDown"," "].includes(_.key)&&(l.value=!0),["Escape","Tab"].includes(_.key)&&(l.value=!1),_.key==="Home"?(G=M.value)==null||G.focus("first"):_.key==="End"&&((Te=M.value)==null||Te.focus("last"));const Y=1e3;function $(fe){const pe=fe.key.length===1,Le=!fe.ctrlKey&&!fe.metaKey&&!fe.altKey;return pe&&Le}if(t.multiple||!$(_))return;const q=performance.now();q-A>Y&&(T=""),T+=_.key.toLowerCase(),A=q;const oe=u.value.find(fe=>fe.title.toLowerCase().startsWith(T));oe!==void 0&&(d.value=[oe])}function F(_){if(t.multiple){const Y=d.value.findIndex($=>t.valueComparator($.value,_.value));if(Y===-1)d.value=[...d.value,_];else{const $=[...d.value];$.splice(Y,1),d.value=$}}else d.value=[_],l.value=!1}function D(_){var Y;(Y=M.value)!=null&&Y.$el.contains(_.relatedTarget)||(l.value=!1)}function I(){var _;p.value&&((_=s.value)==null||_.focus())}function Q(_){p.value=!0}function re(_){if(_==null)d.value=[];else if(Jr(s.value,":autofill")||Jr(s.value,":-webkit-autofill")){const Y=u.value.find($=>$.title===_);Y&&F(Y)}else s.value&&(s.value.value="")}return Ee(l,()=>{if(!t.hideSelected&&l.value&&d.value.length){const _=v.value.findIndex(Y=>d.value.some($=>t.valueComparator($.value,Y.value)));Vt&&window.requestAnimationFrame(()=>{var Y;_>=0&&((Y=o.value)==null||Y.scrollToIndex(_))})}}),He(()=>{const _=!!(t.chips||n.chip),Y=!!(!t.hideNoData||v.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),$=d.value.length>0,[q]=at.filterProps(t),oe=$||!p.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return m(at,ue({ref:s},q,{modelValue:d.value.map(G=>G.props.value).join(", "),"onUpdate:modelValue":re,focused:p.value,"onUpdate:focused":G=>p.value=G,validationValue:d.externalValue,counterValue:d.value.length,dirty:$,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},t.class],style:t.style,inputmode:"none",placeholder:oe,"onClick:clear":x,"onMousedown:control":k,onBlur:D,onKeydown:U,"aria-label":r(g.value),title:r(g.value)}),{...n,default:()=>m(je,null,[m(pa,ue({ref:i,modelValue:l.value,"onUpdate:modelValue":G=>l.value=G,activator:"parent",contentClass:"v-select__content",disabled:O.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:I},t.menuProps),{default:()=>[Y&&m(gu,{ref:M,selected:y.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:G=>G.preventDefault(),onKeydown:R,onFocusin:Q,onScrollPassive:C,tabindex:"-1",color:t.itemColor??t.color},{default:()=>{var G,Te,fe;return[(G=n["prepend-item"])==null?void 0:G.call(n),!v.value.length&&!t.hideNoData&&(((Te=n["no-data"])==null?void 0:Te.call(n))??m(es,{title:r(t.noDataText)},null)),m(id,{ref:o,renderless:!0,items:v.value},{default:pe=>{var P;let{item:Le,index:L,itemRef:ve}=pe;const Lt=ue(Le.props,{ref:ve,key:L,onClick:()=>F(Le)});return((P=n.item)==null?void 0:P.call(n,{item:Le,index:L,props:Lt}))??m(es,Lt,{prepend:Z=>{let{isSelected:me}=Z;return m(je,null,[t.multiple&&!t.hideSelected?m(ws,{key:Le.value,modelValue:me,ripple:!1,tabindex:"-1"},null):void 0,Le.props.prependIcon&&m(st,{icon:Le.props.prependIcon},null)])}})}}),(fe=n["append-item"])==null?void 0:fe.call(n)]}})]}),d.value.map((G,Te)=>{var Le;function fe(L){L.stopPropagation(),L.preventDefault(),F(G)}const pe={"onClick:close":fe,onMousedown(L){L.preventDefault(),L.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return m("div",{key:G.value,class:"v-select__selection"},[_?n.chip?m(jt,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:G.title}}},{default:()=>{var L;return[(L=n.chip)==null?void 0:L.call(n,{item:G,index:Te,props:pe})]}}):m(Zh,ue({key:"chip",closable:t.closableChips,size:"small",text:G.title,disabled:G.props.disabled},pe),null):((Le=n.selection)==null?void 0:Le.call(n,{item:G,index:Te}))??m("span",{class:"v-select__selection-text"},[G.title,t.multiple&&Te<d.value.length-1&&m("span",{class:"v-select__selection-comma"},[Xe(",")])])])})]),"append-inner":function(){var pe;for(var G=arguments.length,Te=new Array(G),fe=0;fe<G;fe++)Te[fe]=arguments[fe];return m(je,null,[(pe=n["append-inner"])==null?void 0:pe.call(n,...Te),t.menuIcon?m(st,{class:"v-select__menu-icon",icon:t.menuIcon},null):void 0])}})}),Ps({isFocused:p,menu:l,select:F},s)}});const R_=(t,e,n)=>t==null||e==null?-1:t.toString().toLocaleLowerCase().indexOf(e.toString().toLocaleLowerCase()),P_=ae({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function k_(t,e,n){var a;const r=[],s=(n==null?void 0:n.default)??R_,i=n!=null&&n.filterKeys?yn(n.filterKeys):!1,o=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(t!=null&&t.length))return r;e:for(let l=0;l<t.length;l++){const[u,c=u]=yn(t[l]),h={},d={};let f=-1;if(e&&!(n!=null&&n.noFilter)){if(typeof u=="object"){const g=i||Object.keys(c);for(const T of g){const A=Nd(c,T,c),v=(a=n==null?void 0:n.customKeyFilter)==null?void 0:a[T];if(f=v?v(A,e,u):s(A,e,u),f!==-1&&f!==!1)v?h[T]=f:d[T]=f;else if((n==null?void 0:n.filterMode)==="every")continue e}}else f=s(u,e,u),f!==-1&&f!==!1&&(d.title=f);const y=Object.keys(d).length,p=Object.keys(h).length;if(!y&&!p||(n==null?void 0:n.filterMode)==="union"&&p!==o&&!y||(n==null?void 0:n.filterMode)==="intersection"&&(p!==o||!y))continue}r.push({index:l,matches:{...d,...h}})}return r}function D_(t,e,n,r){const s=j([]),i=j(new Map),o=S(()=>r!=null&&r.transform?qt(e).map(l=>[l,r.transform(l)]):qt(e));pr(()=>{const l=typeof n=="function"?n():qt(n),u=typeof l!="string"&&typeof l!="number"?"":String(l),c=k_(o.value,u,{customKeyFilter:t.customKeyFilter,default:t.customFilter,filterKeys:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}),h=qt(e),d=[],f=new Map;c.forEach(y=>{let{index:p,matches:g}=y;const T=h[p];d.push(T),f.set(T.value,g)}),s.value=d,i.value=f});function a(l){return i.value.get(l.value)}return{filteredItems:s,filteredMatches:i,getMatches:a}}function x_(t,e,n){if(e==null)return t;if(Array.isArray(e))throw new Error("Multiple matches is not implemented");return typeof e=="number"&&~e?m(je,null,[m("span",{class:"v-combobox__unmask"},[t.substr(0,e)]),m("span",{class:"v-combobox__mask"},[t.substr(e,n)]),m("span",{class:"v-combobox__unmask"},[t.substr(e+n)])]):t}const N_=ae({autoSelectFirst:{type:[Boolean,String]},delimiters:Array,...P_({filterKeys:["title"]}),...ad({hideNoData:!0,returnObject:!0}),...gr(du({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...po({transition:!1})},"VCombobox"),ql=ke()({name:"VCombobox",props:N_(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,e){var Lt;let{emit:n,slots:r}=e;const{t:s}=ho(),i=j(),o=Se(!1),a=Se(!0),l=Se(!1),u=j(),c=j(),h=Ye(t,"menu"),d=S({get:()=>h.value,set:P=>{var Z;h.value&&!P&&((Z=u.value)!=null&&Z.ΨopenChildren)||(h.value=P)}}),f=Se(-1);let y=!1;const p=S(()=>{var P;return(P=i.value)==null?void 0:P.color}),g=S(()=>d.value?t.closeText:t.openText),{items:T,transformIn:A,transformOut:v}=fu(t),{textColorClasses:O,textColorStyles:M}=uo(p),C=Ye(t,"modelValue",[],P=>A(yn(P)),P=>{const Z=v(P);return t.multiple?Z:Z[0]??null}),R=mu(),x=Se(t.multiple?"":((Lt=C.value[0])==null?void 0:Lt.title)??""),k=S({get:()=>x.value,set:P=>{var Z;if(x.value=P??"",t.multiple||(C.value=[xr(t,P)]),P&&t.multiple&&((Z=t.delimiters)!=null&&Z.length)){const me=P.split(new RegExp(`(?:${t.delimiters.join("|")})+`));me.length>1&&(me.forEach(Qe=>{Qe=Qe.trim(),Qe&&pe(xr(t,Qe))}),x.value="")}P||(f.value=-1),a.value=!P}});Ee(x,P=>{y?Dt(()=>y=!1):o.value&&!d.value&&(d.value=!0),n("update:search",P)}),Ee(C,P=>{var Z;t.multiple||(x.value=((Z=P[0])==null?void 0:Z.title)??"")});const{filteredItems:U,getMatches:F}=D_(t,T,()=>a.value?"":k.value),D=S(()=>t.hideSelected?U.value.filter(P=>!C.value.some(Z=>Z.value===P.value)):U.value),I=S(()=>C.value.map(P=>P.value)),Q=S(()=>{var Z;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&k.value===((Z=D.value[0])==null?void 0:Z.title))&&D.value.length>0&&!a.value&&!l.value}),re=S(()=>t.hideNoData&&!T.value.length||t.readonly||(R==null?void 0:R.isReadonly.value)),_=j(),{onListScroll:Y,onListKeydown:$}=od(_,i);function q(P){y=!0,t.openOnClear&&(d.value=!0)}function oe(){re.value||(d.value=!0)}function G(P){re.value||(o.value&&(P.preventDefault(),P.stopPropagation()),d.value=!d.value)}function Te(P){var Qe;if(t.readonly||R!=null&&R.isReadonly.value)return;const Z=i.value.selectionStart,me=C.value.length;if((f.value>-1||["Enter","ArrowDown","ArrowUp"].includes(P.key))&&P.preventDefault(),["Enter","ArrowDown"].includes(P.key)&&(d.value=!0),["Escape"].includes(P.key)&&(d.value=!1),["Enter","Escape","Tab"].includes(P.key)&&(Q.value&&["Enter","Tab"].includes(P.key)&&pe(U.value[0]),a.value=!0),P.key==="ArrowDown"&&Q.value&&((Qe=_.value)==null||Qe.focus("next")),!!t.multiple){if(["Backspace","Delete"].includes(P.key)){if(f.value<0){P.key==="Backspace"&&!k.value&&(f.value=me-1);return}const te=f.value,be=C.value[f.value];be&&!be.props.disabled&&pe(be),f.value=te>=me-1?me-2:te}if(P.key==="ArrowLeft"){if(f.value<0&&Z>0)return;const te=f.value>-1?f.value-1:me-1;C.value[te]?f.value=te:(f.value=-1,i.value.setSelectionRange(k.value.length,k.value.length))}if(P.key==="ArrowRight"){if(f.value<0)return;const te=f.value+1;C.value[te]?f.value=te:(f.value=-1,i.value.setSelectionRange(0,0))}P.key==="Enter"&&k.value&&(pe(xr(t,k.value)),k.value="")}}function fe(){var P;o.value&&(a.value=!0,(P=i.value)==null||P.focus())}function pe(P){if(t.multiple){const Z=C.value.findIndex(me=>t.valueComparator(me.value,P.value));if(Z===-1)C.value=[...C.value,P];else{const me=[...C.value];me.splice(Z,1),C.value=me}k.value=""}else C.value=[P],x.value=P.title,Dt(()=>{d.value=!1,a.value=!0})}function Le(P){o.value=!0,setTimeout(()=>{l.value=!0})}function L(P){l.value=!1}function ve(P){(P==null||P===""&&!t.multiple)&&(C.value=[])}return Ee(U,P=>{!P.length&&t.hideNoData&&(d.value=!1)}),Ee(o,(P,Z)=>{P||P===Z||(f.value=-1,d.value=!1,Q.value&&!l.value&&!C.value.some(me=>{let{value:Qe}=me;return Qe===D.value[0].value})?pe(D.value[0]):t.multiple&&k.value&&(C.value=[...C.value,xr(t,k.value)],k.value=""))}),Ee(d,()=>{if(!t.hideSelected&&d.value&&C.value.length){const P=D.value.findIndex(Z=>C.value.some(me=>t.valueComparator(me.value,Z.value)));Vt&&window.requestAnimationFrame(()=>{var Z;P>=0&&((Z=c.value)==null||Z.scrollToIndex(P))})}}),He(()=>{const P=!!(t.chips||r.chip),Z=!!(!t.hideNoData||D.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),me=C.value.length>0,[Qe]=at.filterProps(t);return m(at,ue({ref:i},Qe,{modelValue:k.value,"onUpdate:modelValue":[te=>k.value=te,ve],focused:o.value,"onUpdate:focused":te=>o.value=te,validationValue:C.externalValue,counterValue:t.multiple?C.value.length:k.value.length,dirty:me,class:["v-combobox",{"v-combobox--active-menu":d.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!r.selection,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:t.readonly,placeholder:me?void 0:t.placeholder,"onClick:clear":q,"onMousedown:control":oe,onKeydown:Te}),{...r,default:()=>m(je,null,[m(pa,ue({ref:u,modelValue:d.value,"onUpdate:modelValue":te=>d.value=te,activator:"parent",contentClass:"v-combobox__content",disabled:re.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:fe},t.menuProps),{default:()=>[Z&&m(gu,{ref:_,selected:I.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:te=>te.preventDefault(),onKeydown:$,onFocusin:Le,onFocusout:L,onScrollPassive:Y,tabindex:"-1",color:t.itemColor??t.color},{default:()=>{var te,be,Ze;return[(te=r["prepend-item"])==null?void 0:te.call(r),!D.value.length&&!t.hideNoData&&(((be=r["no-data"])==null?void 0:be.call(r))??m(es,{title:s(t.noDataText)},null)),m(id,{ref:c,renderless:!0,items:D.value},{default:Bt=>{var _a;let{item:et,index:tt,itemRef:ld}=Bt;const ya=ue(et.props,{ref:ld,key:tt,active:Q.value&&tt===0?!0:void 0,onClick:()=>pe(et)});return((_a=r.item)==null?void 0:_a.call(r,{item:et,index:tt,props:ya}))??m(es,ya,{prepend:kr=>{let{isSelected:Dr}=kr;return m(je,null,[t.multiple&&!t.hideSelected?m(ws,{key:et.value,modelValue:Dr,ripple:!1,tabindex:"-1"},null):void 0,et.props.prependIcon&&m(st,{icon:et.props.prependIcon},null)])},title:()=>{var kr,Dr;return a.value?et.title:x_(et.title,(kr=F(et))==null?void 0:kr.title,((Dr=k.value)==null?void 0:Dr.length)??0)}})}}),(Ze=r["append-item"])==null?void 0:Ze.call(r)]}})]}),C.value.map((te,be)=>{var et;function Ze(tt){tt.stopPropagation(),tt.preventDefault(),pe(te)}const Bt={"onClick:close":Ze,onMousedown(tt){tt.preventDefault(),tt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return m("div",{key:te.value,class:["v-combobox__selection",be===f.value&&["v-combobox__selection--selected",O.value]],style:be===f.value?M.value:{}},[P?r.chip?m(jt,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:te.title}}},{default:()=>{var tt;return[(tt=r.chip)==null?void 0:tt.call(r,{item:te,index:be,props:Bt})]}}):m(Zh,ue({key:"chip",closable:t.closableChips,size:"small",text:te.title,disabled:te.props.disabled},Bt),null):((et=r.selection)==null?void 0:et.call(r,{item:te,index:be}))??m("span",{class:"v-combobox__selection-text"},[te.title,t.multiple&&be<C.value.length-1&&m("span",{class:"v-combobox__selection-comma"},[Xe(",")])])])})]),"append-inner":function(){var Bt;for(var te=arguments.length,be=new Array(te),Ze=0;Ze<te;Ze++)be[Ze]=arguments[Ze];return m(je,null,[(Bt=r["append-inner"])==null?void 0:Bt.call(r,...be),(!t.hideNoData||t.items.length)&&t.menuIcon?m(st,{class:"v-combobox__menu-icon",icon:t.menuIcon,onMousedown:G,onClick:Od,"aria-label":s(g.value),title:s(g.value)},null):void 0])}})}),Ps({isFocused:o,isPristine:a,menu:d,search:k,selectionIndex:f,filteredItems:U,select:pe},i)}}),O_=ae({...dt(),...Md()},"VForm"),M_=ke()({name:"VForm",props:O_(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const s=Fd(t),i=j();function o(l){l.preventDefault(),s.reset()}function a(l){const u=l,c=s.validate();u.then=c.then.bind(c),u.catch=c.catch.bind(c),u.finally=c.finally.bind(c),r("submit",u),u.defaultPrevented||c.then(h=>{var f;let{valid:d}=h;d&&((f=i.value)==null||f.submit())}),u.preventDefault()}return He(()=>{var l;return m("form",{ref:i,class:["v-form",t.class],style:t.style,novalidate:!0,onReset:o,onSubmit:a},[(l=n.default)==null?void 0:l.call(n,s)])}),Ps(s,i)}});const va=Symbol.for("vuetify:v-slider");function F_(t,e,n){const r=n==="vertical",s=e.getBoundingClientRect(),i="touches"in t?t.touches[0]:t;return r?i.clientY-(s.top+s.height/2):i.clientX-(s.left+s.width/2)}function L_(t,e){return"touches"in t&&t.touches.length?t.touches[0][e]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0][e]:t[e]}const B_=ae({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:t=>typeof t=="boolean"||t==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:t=>typeof t=="boolean"||t==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:t=>["vertical","horizontal"].includes(t)},reverse:Boolean,...tu(),...eu({elevation:2})},"Slider"),U_=t=>{const e=S(()=>parseFloat(t.min)),n=S(()=>parseFloat(t.max)),r=S(()=>+t.step>0?parseFloat(t.step):0),s=S(()=>Math.max(Ca(r.value),Ca(e.value)));function i(o){if(o=parseFloat(o),r.value<=0)return o;const a=_n(o,e.value,n.value),l=e.value%r.value,u=Math.round((a-l)/r.value)*r.value+l;return parseFloat(Math.min(u,n.value).toFixed(s.value))}return{min:e,max:n,step:r,decimals:s,roundValue:i}},$_=t=>{let{props:e,steps:n,onSliderStart:r,onSliderMove:s,onSliderEnd:i,getActiveThumb:o}=t;const{isRtl:a}=Rs(),l=le(e,"reverse"),u=S(()=>e.direction==="vertical"),c=S(()=>u.value!==l.value),{min:h,max:d,step:f,decimals:y,roundValue:p}=n,g=S(()=>parseInt(e.thumbSize,10)),T=S(()=>parseInt(e.tickSize,10)),A=S(()=>parseInt(e.trackSize,10)),v=S(()=>(d.value-h.value)/f.value),O=le(e,"disabled"),M=S(()=>e.error||e.disabled?void 0:e.thumbColor??e.color),C=S(()=>e.error||e.disabled?void 0:e.trackColor??e.color),R=S(()=>e.error||e.disabled?void 0:e.trackFillColor??e.color),x=Se(!1),k=Se(0),U=j(),F=j();function D(L){var Ze;const ve=e.direction==="vertical",Lt=ve?"top":"left",P=ve?"height":"width",Z=ve?"clientY":"clientX",{[Lt]:me,[P]:Qe}=(Ze=U.value)==null?void 0:Ze.$el.getBoundingClientRect(),te=L_(L,Z);let be=Math.min(Math.max((te-me-k.value)/Qe,0),1)||0;return(ve?c.value:c.value!==a.value)&&(be=1-be),p(h.value+be*(d.value-h.value))}const I=L=>{i({value:D(L)}),x.value=!1,k.value=0},Q=L=>{F.value=o(L),F.value&&(F.value.focus(),x.value=!0,F.value.contains(L.target)?k.value=F_(L,F.value,e.direction):(k.value=0,s({value:D(L)})),r({value:D(L)}))},re={passive:!0,capture:!0};function _(L){s({value:D(L)})}function Y(L){L.stopPropagation(),L.preventDefault(),I(L),window.removeEventListener("mousemove",_,re),window.removeEventListener("mouseup",Y)}function $(L){var ve;I(L),window.removeEventListener("touchmove",_,re),(ve=L.target)==null||ve.removeEventListener("touchend",$)}function q(L){var ve;Q(L),window.addEventListener("touchmove",_,re),(ve=L.target)==null||ve.addEventListener("touchend",$,{passive:!1})}function oe(L){L.preventDefault(),Q(L),window.addEventListener("mousemove",_,re),window.addEventListener("mouseup",Y,{passive:!1})}const G=L=>{const ve=(L-h.value)/(d.value-h.value)*100;return _n(isNaN(ve)?0:ve,0,100)},Te=le(e,"showTicks"),fe=S(()=>Te.value?e.ticks?Array.isArray(e.ticks)?e.ticks.map(L=>({value:L,position:G(L),label:L.toString()})):Object.keys(e.ticks).map(L=>({value:parseFloat(L),position:G(parseFloat(L)),label:e.ticks[L]})):v.value!==1/0?hu(v.value+1).map(L=>{const ve=h.value+L*f.value;return{value:ve,position:G(ve)}}):[]:[]),pe=S(()=>fe.value.some(L=>{let{label:ve}=L;return!!ve})),Le={activeThumbRef:F,color:le(e,"color"),decimals:y,disabled:O,direction:le(e,"direction"),elevation:le(e,"elevation"),hasLabels:pe,isReversed:l,indexFromEnd:c,min:h,max:d,mousePressed:x,numTicks:v,onSliderMousedown:oe,onSliderTouchstart:q,parsedTicks:fe,parseMouseMove:D,position:G,readonly:le(e,"readonly"),rounded:le(e,"rounded"),roundValue:p,showTicks:Te,startOffset:k,step:f,thumbSize:g,thumbColor:M,thumbLabel:le(e,"thumbLabel"),ticks:le(e,"ticks"),tickSize:T,trackColor:C,trackContainerRef:U,trackFillColor:R,trackSize:A,vertical:u};return Ss(va,Le),Le},j_=ae({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},...dt()},"VSliderThumb"),q_=ke()({name:"VSliderThumb",directives:{Ripple:ao},props:j_(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n,emit:r}=e;const s=Cn(va),{isRtl:i,rtlClasses:o}=Rs();if(!s)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:a,step:l,disabled:u,thumbSize:c,thumbLabel:h,direction:d,isReversed:f,vertical:y,readonly:p,elevation:g,mousePressed:T,decimals:A,indexFromEnd:v}=s,{textColorClasses:O,textColorStyles:M}=uo(a),{pageup:C,pagedown:R,end:x,home:k,left:U,right:F,down:D,up:I}=Bd,Q=[C,R,x,k,U,F,D,I],re=S(()=>l.value?[1,2,3]:[1,5,10]);function _($,q){if(!Q.includes($.key))return;$.preventDefault();const oe=l.value||.1,G=(t.max-t.min)/oe;if([U,F,D,I].includes($.key)){const fe=(y.value?[i.value?U:F,f.value?D:I]:v.value!==i.value?[U,I]:[F,I]).includes($.key)?1:-1,pe=$.shiftKey?2:$.ctrlKey?1:0;q=q+fe*oe*re.value[pe]}else if($.key===k)q=t.min;else if($.key===x)q=t.max;else{const Te=$.key===R?1:-1;q=q-Te*oe*(G>100?G/10:10)}return Math.max(t.min,Math.min(t.max,q))}function Y($){const q=_($,t.modelValue);q!=null&&r("update:modelValue",q)}return He(()=>{const $=ye(v.value?100-t.position:t.position,"%"),{elevationClasses:q}=nu(S(()=>u.value?void 0:g.value));return m("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":t.focused,"v-slider-thumb--pressed":t.focused&&T.value},t.class,o.value],style:[{"--v-slider-thumb-position":$,"--v-slider-thumb-size":ye(c.value)},t.style],role:"slider",tabindex:u.value?-1:0,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.modelValue,"aria-readonly":!!p.value,"aria-orientation":d.value,onKeydown:p.value?void 0:Y},[m("div",{class:["v-slider-thumb__surface",O.value,q.value],style:{...M.value}},null),vn(m("div",{class:["v-slider-thumb__ripple",O.value],style:M.value},null),[[bs("ripple"),t.ripple,null,{circle:!0,center:!0}]]),m(Ld,{origin:"bottom center"},{default:()=>{var oe;return[vn(m("div",{class:"v-slider-thumb__label-container"},[m("div",{class:["v-slider-thumb__label"]},[m("div",null,[((oe=n["thumb-label"])==null?void 0:oe.call(n,{modelValue:t.modelValue}))??t.modelValue.toFixed(l.value?A.value:1)])])]),[[fo,h.value&&t.focused||h.value==="always"]])]}})])}),{}}});const z_=ae({start:{type:Number,required:!0},stop:{type:Number,required:!0},...dt()},"VSliderTrack"),K_=ke()({name:"VSliderTrack",props:z_(),emits:{},setup(t,e){let{slots:n}=e;const r=Cn(va);if(!r)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:s,parsedTicks:i,rounded:o,showTicks:a,tickSize:l,trackColor:u,trackFillColor:c,trackSize:h,vertical:d,min:f,max:y,indexFromEnd:p}=r,{roundedClasses:g}=ru(o),{backgroundColorClasses:T,backgroundColorStyles:A}=Yr(c),{backgroundColorClasses:v,backgroundColorStyles:O}=Yr(u),M=S(()=>`inset-${d.value?"block":"inline"}-${p.value?"end":"start"}`),C=S(()=>d.value?"height":"width"),R=S(()=>({[M.value]:"0%",[C.value]:"100%"})),x=S(()=>t.stop-t.start),k=S(()=>({[M.value]:ye(t.start,"%"),[C.value]:ye(x.value,"%")})),U=S(()=>a.value?(d.value?i.value.slice().reverse():i.value).map((D,I)=>{var re;const Q=D.value!==f.value&&D.value!==y.value?ye(D.position,"%"):void 0;return m("div",{key:D.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":D.position>=t.start&&D.position<=t.stop,"v-slider-track__tick--first":D.value===f.value,"v-slider-track__tick--last":D.value===y.value}],style:{[M.value]:Q}},[(D.label||n["tick-label"])&&m("div",{class:"v-slider-track__tick-label"},[((re=n["tick-label"])==null?void 0:re.call(n,{tick:D,index:I}))??D.label])])}):[]);return He(()=>m("div",{class:["v-slider-track",g.value,t.class],style:[{"--v-slider-track-size":ye(h.value),"--v-slider-tick-size":ye(l.value)},t.style]},[m("div",{class:["v-slider-track__background",v.value,{"v-slider-track__background--opacity":!!s.value||!c.value}],style:{...R.value,...O.value}},null),m("div",{class:["v-slider-track__fill",T.value],style:{...k.value,...A.value}},null),a.value&&m("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":a.value==="always"}]},[U.value])])),{}}}),H_=ae({...Ud(),...B_(),...Yl(),modelValue:{type:[Number,String],default:0}},"VSlider"),G_=ke()({name:"VSlider",props:H_(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,start:t=>!0,end:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const s=j(),{rtlClasses:i}=Rs(),o=U_(t),a=Ye(t,"modelValue",void 0,C=>o.roundValue(C??o.min.value)),{min:l,max:u,mousePressed:c,roundValue:h,onSliderMousedown:d,onSliderTouchstart:f,trackContainerRef:y,position:p,hasLabels:g,readonly:T}=$_({props:t,steps:o,onSliderStart:()=>{r("start",a.value)},onSliderEnd:C=>{let{value:R}=C;const x=h(R);a.value=x,r("end",x)},onSliderMove:C=>{let{value:R}=C;return a.value=h(R)},getActiveThumb:()=>{var C;return(C=s.value)==null?void 0:C.$el}}),{isFocused:A,focus:v,blur:O}=Jl(t),M=S(()=>p(a.value));return He(()=>{const[C,R]=Zr.filterProps(t),x=!!(t.label||n.label||n.prepend);return m(Zr,ue({class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||g.value,"v-slider--focused":A.value,"v-slider--pressed":c.value,"v-slider--disabled":t.disabled},i.value,t.class],style:t.style},C,{focused:A.value}),{...n,prepend:x?k=>{var U,F;return m(je,null,[((U=n.label)==null?void 0:U.call(n,k))??(t.label?m(Xl,{id:k.id.value,class:"v-slider__label",text:t.label},null):void 0),(F=n.prepend)==null?void 0:F.call(n,k)])}:void 0,default:k=>{let{id:U,messagesId:F}=k;return m("div",{class:"v-slider__container",onMousedown:T.value?void 0:d,onTouchstartPassive:T.value?void 0:f},[m("input",{id:U.value,name:t.name||U.value,disabled:!!t.disabled,readonly:!!t.readonly,tabindex:"-1",value:a.value},null),m(K_,{ref:y,start:0,stop:M.value},{"tick-label":n["tick-label"]}),m(q_,{ref:s,"aria-describedby":F.value,focused:A.value,min:l.value,max:u.value,modelValue:a.value,"onUpdate:modelValue":D=>a.value=D,position:M.value,elevation:t.elevation,onFocus:v,onBlur:O},{"thumb-label":n["thumb-label"]})])}})}),{}}}),W_={class:"MainBgColor"},Q_={class:"d-flex justify-center"},X_=vo({__name:"Form",props:{toggleFormVisible:Function},setup(t){const e=t,n=j(!1),r=S(()=>k.value),s=["Gym","Running","Cycling","Bouldering","HIIT","Ruhe Tag"],i=["Bio Sauna","Finnish Sauna","Steam Sauna"],o=j(""),a=j(""),l=j(""),u=j("50"),c=j("0"),h=j("9"),d=j("7"),f=j([]),y=j([]),p=j(!1),g=j(!0),T=j(!0),A=j(!0),v=j(!1),O=j(!1),M=j(!1),C=j(!1),R=j(!1),x=j(!1),k=j(new Date().toISOString().substr(0,10)),U=()=>{o.value="",a.value="",l.value="",u.value="50",c.value="0",h.value="9",d.value="7",f.value=[],y.value=[],p.value=!1,g.value=!0,T.value=!0,A.value=!0,v.value=!1,O.value=!1,M.value=!1,C.value=!1,R.value=!1,x.value=!1,k.value=void 0},F=async()=>{console.log("saveTrainingData called");try{await Uy(Oh(Gh,"TrainingSet"),{Name:o.value,Date:k.value,SportType:f.value,Sauna:{SaunaType:y.value},Supplements:{BCAA:{Intake:p.value,amount:p.value?parseInt(c.value):0},Creatin:{Intake:g.value,amount:g.value?parseInt(d.value):0},EAA:{Intake:T.value,amount:T.value?parseInt(h.value):0},Protein:{Intake:A.value,amount:A.value?parseInt(u.value):0}},Vitamins:{VitaminD3:{Intake:O.value},Zinc:{Intake:M.value},MultiVitamin:{Intake:R.value},Magnesium:{Intake:x.value},LionsMain:{Intake:C.value}},Feedback:{Note:a.value,Feedback:l.value}}),console.log("Training data added successfully"),e.toggleFormVisible()}catch(D){console.error("Error adding training data: ",D)}};return(D,I)=>{const Q=Ra("v-subheader"),re=Ra("v-date-picker");return lt(),ts("div",W_,[m(zd,null,{default:W(()=>[m(M_,{"fast-fail":"",onSubmit:I[22]||(I[22]=$d(()=>{},["prevent"]))},{default:W(()=>[m(zr,{"prepend-icon":"mdi-chevron-left",onClick:e.toggleFormVisible,rounded:""},{default:W(()=>[Xe("cancel")]),_:1},8,["onClick"]),Ie("div",Q_,[m(Q,{class:"custom-subheader"},{default:W(()=>[Xe("Trainings data")]),_:1})]),m(sn,{class:"mb-4",outlined:""},{default:W(()=>[m(on,null,{default:W(()=>[m(Nr,null,{default:W(()=>[m(We,{cols:"12",sm:"4"},{default:W(()=>[m(at,{modelValue:o.value,"onUpdate:modelValue":I[0]||(I[0]=_=>o.value=_),label:"Name"},null,8,["modelValue"])]),_:1}),m(We,{cols:"12",sm:"4"},{default:W(()=>[m(ql,{clearable:"",chips:"",multiple:"",modelValue:f.value,"onUpdate:modelValue":I[1]||(I[1]=_=>f.value=_),items:s,rules:[_=>_.length>0||"Mindestens ein Item ist erforderlich"],label:"Sport Art",required:""},null,8,["modelValue","rules"])]),_:1}),m(We,{cols:"12",sm:"4"},{default:W(()=>[m(pa,{modelValue:n.value,"onUpdate:modelValue":I[5]||(I[5]=_=>n.value=_),"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},{activator:W(({on:_})=>[m(at,ue({modelValue:r.value,"onUpdate:modelValue":I[2]||(I[2]=Y=>r.value=Y),label:"Picker without buttons","prepend-icon":"event",readonly:""},jd(_)),null,16,["modelValue"])]),default:W(()=>[m(re,{modelValue:k.value,"onUpdate:modelValue":I[3]||(I[3]=_=>k.value=_),onInput:I[4]||(I[4]=_=>n.value=!1)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),m(sn,{class:"mb-4",outlined:""},{default:W(()=>[m(on,null,{default:W(()=>[m(ql,{clearable:"",chips:"",multiple:"",modelValue:y.value,"onUpdate:modelValue":I[6]||(I[6]=_=>y.value=_),items:i,rules:[_=>_.length>0||"Mindestens ein Item ist erforderlich"],label:"Sauna Art"},null,8,["modelValue","rules"])]),_:1})]),_:1}),m(sn,{class:"mb-4",outlined:""},{default:W(()=>[m(on,null,{default:W(()=>[m(Nr,null,{default:W(()=>[m(We,{cols:"12",sm:"3"},{default:W(()=>[m(Tt,{modelValue:p.value,"onUpdate:modelValue":I[7]||(I[7]=_=>p.value=_),label:"BCAA"},null,8,["modelValue"]),m(at,{label:"BCAA gr.",modelValue:c.value,"onUpdate:modelValue":I[8]||(I[8]=_=>c.value=_)},null,8,["modelValue"])]),_:1}),m(We,{cols:"12",sm:"3"},{default:W(()=>[m(Tt,{modelValue:g.value,"onUpdate:modelValue":I[9]||(I[9]=_=>g.value=_),label:"Creatin"},null,8,["modelValue"]),m(at,{label:"Creatin gr.",modelValue:d.value,"onUpdate:modelValue":I[10]||(I[10]=_=>d.value=_)},null,8,["modelValue"])]),_:1}),m(We,{cols:"12",sm:"3"},{default:W(()=>[m(Tt,{modelValue:T.value,"onUpdate:modelValue":I[11]||(I[11]=_=>T.value=_),label:"EAA"},null,8,["modelValue"]),m(at,{label:"EAA gr.",modelValue:h.value,"onUpdate:modelValue":I[12]||(I[12]=_=>h.value=_)},null,8,["modelValue"])]),_:1}),m(We,{cols:"12",sm:"3"},{default:W(()=>[m(Tt,{modelValue:A.value,"onUpdate:modelValue":I[13]||(I[13]=_=>A.value=_),label:"Protein"},null,8,["modelValue"]),m(at,{label:"Protein gr.",modelValue:u.value,"onUpdate:modelValue":I[14]||(I[14]=_=>u.value=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),m(sn,{class:"mb-4",outlined:""},{default:W(()=>[m(on,null,{default:W(()=>[m(Nr,null,{default:W(()=>[m(We,{cols:"12",sm:"3"},{default:W(()=>[m(Tt,{modelValue:O.value,"onUpdate:modelValue":I[15]||(I[15]=_=>O.value=_),label:"Vitamin D3"},null,8,["modelValue"])]),_:1}),m(We,{cols:"12",sm:"3"},{default:W(()=>[m(Tt,{modelValue:M.value,"onUpdate:modelValue":I[16]||(I[16]=_=>M.value=_),label:"Zinc"},null,8,["modelValue"])]),_:1}),m(We,{cols:"12",sm:"3"},{default:W(()=>[m(Tt,{modelValue:R.value,"onUpdate:modelValue":I[17]||(I[17]=_=>R.value=_),label:"Multi Vitamin"},null,8,["modelValue"])]),_:1}),m(We,{cols:"12",sm:"3"},{default:W(()=>[m(Tt,{modelValue:x.value,"onUpdate:modelValue":I[18]||(I[18]=_=>x.value=_),label:"Magnesium"},null,8,["modelValue"])]),_:1}),m(We,{cols:"12",sm:"3"},{default:W(()=>[m(Tt,{modelValue:C.value,"onUpdate:modelValue":I[19]||(I[19]=_=>C.value=_),label:"Lions Main"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),m(sn,{outlined:""},{default:W(()=>[m(on,null,{default:W(()=>[m(at,{modelValue:a.value,"onUpdate:modelValue":I[20]||(I[20]=_=>a.value=_),label:"Notes"},null,8,["modelValue"]),m(G_,{modelValue:l.value,"onUpdate:modelValue":I[21]||(I[21]=_=>l.value=_),label:"How was it?",min:0,max:10,step:.25,color:"orange","thumb-label":""},null,8,["modelValue"])]),_:1})]),_:1}),m(qd,{thickness:"15",color:"transparent"}),m(sn,{class:"mb-4",outlined:""},{default:W(()=>[m(on,null,{default:W(()=>[m(Nr,{justify:"center"},{default:W(()=>[m(We,{cols:"3"},{default:W(()=>[m(zr,{"prepend-icon":"mdi-undo-variant",block:"",color:"grey lighten-1",elevation:"24",large:"",rounded:"",onClick:U},{default:W(()=>[Xe(" Reset ")]),_:1})]),_:1}),m(We,{cols:"9"},{default:W(()=>[m(zr,{"prepend-icon":"mdi-content-save-outline",type:"submit",block:"",color:"#fe6847",elevation:"24",large:"",rounded:"",onClick:F},{default:W(()=>[Xe(" Save ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});const Y_=Kd(X_,[["__scopeId","data-v-9a6b94f4"]]);const J_=ae({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...dt(),...oo(),...co(),...mr()},"VTable"),Z_=ke()({name:"VTable",props:J_(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Vs(t),{densityClasses:s}=lo(t);return He(()=>m(t.tag,{class:["v-table",{"v-table--fixed-height":!!t.height,"v-table--fixed-header":t.fixedHeader,"v-table--fixed-footer":t.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":t.hover},r.value,s.value,t.class],style:t.style},{default:()=>{var i,o,a;return[(i=n.top)==null?void 0:i.call(n),n.default?m("div",{class:"v-table__wrapper",style:{height:ye(t.height)}},[m("table",null,[n.default()])]):(o=n.wrapper)==null?void 0:o.call(n),(a=n.bottom)==null?void 0:a.call(n)]}})),{}}}),eE=Ie("th",{class:"text-left"},"Nr.",-1),tE=Ie("th",{class:"text-center"},"Creatin",-1),nE=Ie("th",{class:"text-center"},"EAA",-1),rE=Ie("th",{class:"text-center"},"Protein",-1),sE=Ie("th",{class:"text-center"},"BCAA",-1),iE={class:"text-center"},oE={class:"text-center"},aE={class:"text-center"},lE={class:"text-center"},uE=vo({__name:"Table",setup(t){const e=j([]),n=j(""),r=j("asc");function s(l,u,c){let h=l[c],d=u[c];return Array.isArray(h)&&(h=h.join(", ")),Array.isArray(d)&&(d=d.join(", ")),h>d?1:h<d?-1:0}const i=S(()=>n.value?[...e.value].sort((l,u)=>{const c=n.value,h=s(l,u,c);return r.value==="asc"?h:-h}):e.value);function o(l){n.value===l?r.value=r.value==="asc"?"desc":"asc":(n.value=l,r.value="asc")}function a(l){return n.value!==l?"":r.value==="asc"?"mdi-menu-up":"mdi-menu-down"}return go(async()=>{const l=await By(Oh(Gh,"TrainingSet"));e.value=l.docs.map(u=>({id:u.id,...u.data()}))}),(l,u)=>(lt(),zt(Z_,{theme:"dark"},{default:W(()=>[Ie("thead",null,[Ie("tr",null,[eE,Ie("th",{class:"text-left",onClick:u[0]||(u[0]=c=>o("Date"))},[Xe("Date "),a("Date")?(lt(),zt(st,{key:0},{default:W(()=>[Xe(ot(a("Date")),1)]),_:1})):dn("",!0)]),Ie("th",{class:"text-left",onClick:u[1]||(u[1]=c=>o("Name"))},[Xe("Name "),a("Name")?(lt(),zt(st,{key:0},{default:W(()=>[Xe(ot(a("Name")),1)]),_:1})):dn("",!0)]),Ie("th",{class:"text-left",onClick:u[2]||(u[2]=c=>o("SportType"))},[Xe("Sport Type "),a("SportType")?(lt(),zt(st,{key:0},{default:W(()=>[Xe(ot(a("SportType")),1)]),_:1})):dn("",!0)]),tE,nE,rE,sE])]),Ie("tbody",null,[(lt(!0),ts(je,null,Hd(i.value,(c,h)=>(lt(),ts("tr",{key:c.id},[Ie("td",null,ot(h+1),1),Ie("td",null,ot(c.Date),1),Ie("td",null,ot(c.Name),1),Ie("td",null,ot(c.SportType?c.SportType.join(", "):"N/A"),1),Ie("td",iE,ot(c.supplements&&c.supplements.Creatin.selected?c.supplements.Creatin.amount+"g":"No"),1),Ie("td",oE,ot(c.supplements&&c.supplements.EAA.selected?c.supplements.EAA.amount+"g":"No"),1),Ie("td",aE,ot(c.supplements&&c.supplements.Protein.selected?c.supplements.Protein.amount+"g":"No"),1),Ie("td",lE,ot(c.supplements&&c.supplements.BCAA.selected?c.supplements.BCAA.amount+"g":"No"),1)]))),128))])]),_:1}))}});function cE(){const t=j([]);async function e(i){await $fetch("/api/sportstats",{method:"POST",body:i})}async function n(){t.value=await $fetch("/api/sportstats")}async function r(i){await $fetch(`/api/sportstats/${i.id}`,{method:"PUT",body:i})}async function s(i){await $fetch(`/api/sportstats/${i}`,{method:"DELETE"})}return Gd(async()=>{await n()}),{sportStats:t,createSportStats:e,reloadSportStats:n,updateSportStats:r,deleteSportStats:s}}const gE=vo({__name:"gallery",setup(t){cE();const e=j(!1);function n(){e.value=!e.value}return(r,s)=>(lt(),ts(je,null,[qt(e)?(lt(),zt(Y_,{key:0,toggleFormVisible:n})):dn("",!0),qt(e)?dn("",!0):(lt(),zt(zr,{key:1,"prepend-icon":"mdi-plus-circle",block:"",rounded:"xl",onClick:n},{default:W(()=>[Xe(" Add Entry")]),_:1})),qt(e)?dn("",!0):(lt(),zt(uE,{key:2}))],64))}});export{gE as default};
