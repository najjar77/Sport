import{u as q,G as A,s as K,b as j,d as J}from"./init.d3405400.js";import{M as W,V as U,ao as $,K as G,a3 as H,v as t,at as O,au as X,aw as z,X as Q,ag as Y,a2 as Z,aA as ee,aC as ae,aD as te,aq as le,b5 as oe,a5 as se,c as E,a1 as ne,bM as re,aJ as P,aW as h,bN as ue,d as ie,r as p,m as V,q as F,x as i,bK as de,bA as S,a9 as ce,bB as me,bC as ve,t as k,bH as B,y as T,bG as R,bm as w,bO as L,_ as D,bp as fe,n as ge}from"./entry.2b722cbd.js";import{V as be,a as _e,b as ye}from"./VCard.3f75cd8d.js";const Ve=W({text:String,...U(),...$()},"VToolbarTitle"),M=G()({name:"VToolbarTitle",props:Ve(),setup(e,c){let{slots:a}=c;return H(()=>{const v=!!(a.default||a.text||e.text);return t(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var f;return[v&&t("div",{class:"v-toolbar-title__placeholder"},[a.text?a.text():e.text,(f=a.default)==null?void 0:f.call(a)])]}})}),{}}}),xe=[null,"prominent","default","comfortable","compact"],he=W({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>xe.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...O(),...U(),...X(),...z(),...$({tag:"header"}),...Q()},"VToolbar"),pe=G()({name:"VToolbar",props:he(),setup(e,c){var x;let{slots:a}=c;const{backgroundColorClasses:v,backgroundColorStyles:f}=Y(Z(e,"color")),{borderClasses:g}=ee(e),{elevationClasses:l}=ae(e),{roundedClasses:d}=te(e),{themeClasses:s}=le(e),{rtlClasses:n}=oe(),m=se(!!(e.extended||(x=a.extension)!=null&&x.call(a))),b=E(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),_=E(()=>m.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ne({VBtn:{variant:"text"}}),H(()=>{var C;const o=!!(e.title||a.title),r=!!(a.image||e.image),u=(C=a.extension)==null?void 0:C.call(a);return m.value=!!(e.extended||u),t(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},v.value,g.value,l.value,d.value,s.value,n.value,e.class],style:[f.value,e.style]},{default:()=>[r&&t("div",{key:"image",class:"v-toolbar__image"},[a.image?t(P,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):t(re,{key:"image-img",cover:!0,src:e.image},null)]),t(P,{defaults:{VTabs:{height:h(b.value)}}},{default:()=>{var y,N,I;return[t("div",{class:"v-toolbar__content",style:{height:h(b.value)}},[a.prepend&&t("div",{class:"v-toolbar__prepend"},[(y=a.prepend)==null?void 0:y.call(a)]),o&&t(M,{key:"title",text:e.title},{text:a.title}),(N=a.default)==null?void 0:N.call(a),a.append&&t("div",{class:"v-toolbar__append"},[(I=a.append)==null?void 0:I.call(a)])])]}}),t(P,{defaults:{VTabs:{height:h(_.value)}}},{default:()=>[t(ue,null,{default:()=>[m.value&&t("div",{class:"v-toolbar__extension",style:{height:h(_.value)}},[u])]})]})]})}),{contentHeight:b,extensionHeight:_}}}),ke={key:0,class:"message"},Te=ie({__name:"Login",emits:["loginSuccessful"],setup(e,{emit:c}){const{auth:a,db:v,userId:f}=q(),g=()=>({email:"",password:"",confirmPassword:"",username:""}),l=p(g()),d=p(!1),s=p(""),n=p(!1),m=()=>{c("loginSuccessful")};async function b(){n.value=!1;try{if(d.value){if(l.value.password!==l.value.confirmPassword){s.value="Passwords do not match",n.value=!0;return}const o=await j(a,l.value.email,l.value.password);console.log("Registration successful:",o.user),s.value=`Welcome, ${l.value.username}!`}else{const o=await J(a,l.value.email,l.value.password);console.log("Login successful:",o.user),m(),s.value=`Welcome back, ${o.user.email}!`}n.value=!0,setTimeout(()=>{s.value="",n.value=!1},5e3)}catch(o){console.error("Authentication error:",o),o instanceof Error?s.value=o.message:s.value="An unexpected error occurred",n.value=!0}l.value=g()}async function _(){n.value=!1;try{const o=new A,r=await K(a,o),u=A.credentialFromResult(r);if(u){const C=u.accessToken,y=r.user;console.log("Login successful:",y),m(),s.value=`Welcome back, ${y.displayName}!`,n.value=!0}else console.log("No credential returned from the sign-in operation"),s.value="Failed to obtain access token from Google.",n.value=!0;setTimeout(()=>{s.value="",n.value=!1},5e3)}catch(o){console.error("Authentication error:",o),o instanceof Error?s.value=o.message:s.value="An unexpected error occurred",n.value=!0}}function x(){d.value=!d.value,l.value=g(),s.value="",n.value=!1}return(o,r)=>(V(),F(ce,null,[t(de,{class:"fill-height",fluid:""},{default:i(()=>[t(me,{justify:"center",align:"center"},{default:i(()=>[t(ve,{cols:"12",sm:"8",md:"4"},{default:i(()=>[t(be,{class:"elevation-12"},{default:i(()=>[n.value?(V(),F("div",ke,k(s.value),1)):B("",!0),t(pe,{color:"primary",dark:"",flat:""},{default:i(()=>[t(M,null,{default:i(()=>[T(k(d.value?"Register":"Login"),1)]),_:1})]),_:1}),t(_e,null,{default:i(()=>[d.value?(V(),R(w,{key:0,label:"Username",name:"username","prepend-icon":"mdi-account",type:"text",modelValue:l.value.username,"onUpdate:modelValue":r[0]||(r[0]=u=>l.value.username=u)},null,8,["modelValue"])):B("",!0),t(w,{label:"Email",name:"email","prepend-icon":"mdi-email",type:"email",modelValue:l.value.email,"onUpdate:modelValue":r[1]||(r[1]=u=>l.value.email=u)},null,8,["modelValue"]),t(w,{label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",modelValue:l.value.password,"onUpdate:modelValue":r[2]||(r[2]=u=>l.value.password=u)},null,8,["modelValue"]),d.value?(V(),R(w,{key:1,label:"Confirm Password",name:"confirmPassword","prepend-icon":"mdi-lock-check",type:"password",modelValue:l.value.confirmPassword,"onUpdate:modelValue":r[3]||(r[3]=u=>l.value.confirmPassword=u)},null,8,["modelValue"])):B("",!0)]),_:1}),t(ye,null,{default:i(()=>[t(L),t(S,{color:"primary",text:"",onClick:b},{default:i(()=>[T(k(d.value?"Register":"Login"),1)]),_:1}),t(L),t(S,{color:"secondary",text:"",onClick:x},{default:i(()=>[T(k(d.value?"Login":"Register"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(S,{color:"primary",text:"",onClick:_},{default:i(()=>[T("Sign in with Google")]),_:1})],64))}});const we=D(Te,[["__scopeId","data-v-fb3efa9f"]]);const Ce={};function Pe(e,c){const a=we;return V(),R(a,{onLoginSuccessful:c[0]||(c[0]=v=>("navigateTo"in e?e.navigateTo:fe(ge))("/home"))})}const Ne=D(Ce,[["render",Pe],["__scopeId","data-v-ec16c530"]]);export{Ne as default};
