import{u as O,G as N,s as j,b as q,d as J}from"./init.a4aa3361.js";import{U,a2 as W,aw as $,R as G,ab as H,v as t,aB as M,aC as Q,aE as z,a4 as X,ao as Y,aa as Z,aI as ee,aK as ae,aL as te,ay as le,bd as oe,ad as se,c as L,a9 as ne,bO as re,aR as P,b2 as x,bP as ue,d as ie,r as p,m as V,q as F,x as i,V as de,bG as R,ah as ce,O as me,J as ve,t as k,bK as S,y as T,I as B,bu as w,bQ as A,_ as D,bv as fe,n as ge}from"./entry.2049b8e4.js";import{V as be,b as _e,c as ye}from"./VCard.e3f395e0.js";const Ve=U({text:String,...W(),...$()},"VToolbarTitle"),K=G()({name:"VToolbarTitle",props:Ve(),setup(e,c){let{slots:a}=c;return H(()=>{const v=!!(a.default||a.text||e.text);return t(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var f;return[v&&t("div",{class:"v-toolbar-title__placeholder"},[a.text?a.text():e.text,(f=a.default)==null?void 0:f.call(a)])]}})}),{}}}),he=[null,"prominent","default","comfortable","compact"],xe=U({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>he.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...M(),...W(),...Q(),...z(),...$({tag:"header"}),...X()},"VToolbar"),pe=G()({name:"VToolbar",props:xe(),setup(e,c){var h;let{slots:a}=c;const{backgroundColorClasses:v,backgroundColorStyles:f}=Y(Z(e,"color")),{borderClasses:g}=ee(e),{elevationClasses:l}=ae(e),{roundedClasses:d}=te(e),{themeClasses:s}=le(e),{rtlClasses:n}=oe(),m=se(!!(e.extended||(h=a.extension)!=null&&h.call(a))),b=L(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),_=L(()=>m.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ne({VBtn:{variant:"text"}}),H(()=>{var C;const o=!!(e.title||a.title),r=!!(a.image||e.image),u=(C=a.extension)==null?void 0:C.call(a);return m.value=!!(e.extended||u),t(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},v.value,g.value,l.value,d.value,s.value,n.value,e.class],style:[f.value,e.style]},{default:()=>[r&&t("div",{key:"image",class:"v-toolbar__image"},[a.image?t(P,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):t(re,{key:"image-img",cover:!0,src:e.image},null)]),t(P,{defaults:{VTabs:{height:x(b.value)}}},{default:()=>{var y,I,E;return[t("div",{class:"v-toolbar__content",style:{height:x(b.value)}},[a.prepend&&t("div",{class:"v-toolbar__prepend"},[(y=a.prepend)==null?void 0:y.call(a)]),o&&t(K,{key:"title",text:e.title},{text:a.title}),(I=a.default)==null?void 0:I.call(a),a.append&&t("div",{class:"v-toolbar__append"},[(E=a.append)==null?void 0:E.call(a)])])]}}),t(P,{defaults:{VTabs:{height:x(_.value)}}},{default:()=>[t(ue,null,{default:()=>[m.value&&t("div",{class:"v-toolbar__extension",style:{height:x(_.value)}},[u])]})]})]})}),{contentHeight:b,extensionHeight:_}}}),ke={key:0,class:"message"},Te=ie({__name:"Login",emits:["loginSuccessful"],setup(e,{emit:c}){const{auth:a,db:v,userId:f}=O(),g=()=>({email:"",password:"",confirmPassword:"",username:""}),l=p(g()),d=p(!1),s=p(""),n=p(!1),m=()=>{c("loginSuccessful")};async function b(){n.value=!1;try{if(d.value){if(l.value.password!==l.value.confirmPassword){s.value="Passwords do not match",n.value=!0;return}const o=await q(a,l.value.email,l.value.password);console.log("Registration successful:",o.user),s.value=`Welcome, ${l.value.username}!`}else{const o=await J(a,l.value.email,l.value.password);console.log("Login successful:",o.user),m(),s.value=`Welcome back, ${o.user.email}!`}n.value=!0,setTimeout(()=>{s.value="",n.value=!1},5e3)}catch(o){console.error("Authentication error:",o),o instanceof Error?s.value=o.message:s.value="An unexpected error occurred",n.value=!0}l.value=g()}async function _(){n.value=!1;try{const o=new N,r=await j(a,o),u=N.credentialFromResult(r);if(u){const C=u.accessToken,y=r.user;console.log("Login successful:",y),m(),s.value=`Welcome back, ${y.displayName}!`,n.value=!0}else console.log("No credential returned from the sign-in operation"),s.value="Failed to obtain access token from Google.",n.value=!0;setTimeout(()=>{s.value="",n.value=!1},5e3)}catch(o){console.error("Authentication error:",o),o instanceof Error?s.value=o.message:s.value="An unexpected error occurred",n.value=!0}}function h(){d.value=!d.value,l.value=g(),s.value="",n.value=!1}return(o,r)=>(V(),F(ce,null,[t(de,{class:"fill-height",fluid:""},{default:i(()=>[t(me,{justify:"center",align:"center"},{default:i(()=>[t(ve,{cols:"12",sm:"8",md:"4"},{default:i(()=>[t(be,{class:"elevation-12"},{default:i(()=>[n.value?(V(),F("div",ke,k(s.value),1)):S("",!0),t(pe,{color:"primary",dark:"",flat:""},{default:i(()=>[t(K,null,{default:i(()=>[T(k(d.value?"Register":"Login"),1)]),_:1})]),_:1}),t(_e,null,{default:i(()=>[d.value?(V(),B(w,{key:0,label:"Username",name:"username","prepend-icon":"mdi-account",type:"text",modelValue:l.value.username,"onUpdate:modelValue":r[0]||(r[0]=u=>l.value.username=u)},null,8,["modelValue"])):S("",!0),t(w,{label:"Email",name:"email","prepend-icon":"mdi-email",type:"email",modelValue:l.value.email,"onUpdate:modelValue":r[1]||(r[1]=u=>l.value.email=u)},null,8,["modelValue"]),t(w,{label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",modelValue:l.value.password,"onUpdate:modelValue":r[2]||(r[2]=u=>l.value.password=u)},null,8,["modelValue"]),d.value?(V(),B(w,{key:1,label:"Confirm Password",name:"confirmPassword","prepend-icon":"mdi-lock-check",type:"password",modelValue:l.value.confirmPassword,"onUpdate:modelValue":r[3]||(r[3]=u=>l.value.confirmPassword=u)},null,8,["modelValue"])):S("",!0)]),_:1}),t(ye,null,{default:i(()=>[t(A),t(R,{color:"primary",text:"",onClick:b},{default:i(()=>[T(k(d.value?"Register":"Login"),1)]),_:1}),t(A),t(R,{color:"secondary",text:"",onClick:h},{default:i(()=>[T(k(d.value?"Login":"Register"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(R,{color:"primary",text:"",onClick:_},{default:i(()=>[T("Sign in with Google")]),_:1})],64))}});const we=D(Te,[["__scopeId","data-v-fb3efa9f"]]);const Ce={};function Pe(e,c){const a=we;return V(),B(a,{onLoginSuccessful:c[0]||(c[0]=v=>("navigateTo"in e?e.navigateTo:fe(ge))("/home"))})}const Ie=D(Ce,[["render",Pe],["__scopeId","data-v-ec16c530"]]);export{Ie as default};
